!function(e){function t(t){for(var o,r,a=t[0],i=t[1],s=t[2],c=0,l=[];c<a.length;c++)r=a[c],P[r]&&l.push(P[r][0]),P[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(G&&G(t);l.length;)l.shift()();return _.push.apply(_,s||[]),n()}function n(){for(var e,t=0;t<_.length;t++){for(var n=_[t],o=!0,r=1;r<n.length;r++){var a=n[r];0!==P[a]&&(o=!1)}o&&(_.splice(t--,1),e=L(L.s=n[0]))}return e}var o=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!A[e]||!k[e])return;for(var n in k[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--g&&0===v&&E()}(e,t),o&&o(e,t)};var r,a=!0,i="10887ee1e4270685e1dd",s=1e4,c={},l=[],u=[];function f(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)t._acceptedDependencies[e[o]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:S,apply:C,status:function(e){if(!e)return d;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:c[e]};return r=void 0,t}var p=[],d="idle";function h(e){d=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var y,m,b,g=0,v=0,w={},k={},A={};function O(e){return+e+""===e?+e:e}function S(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return a=e,h("check"),(t=s,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var o=new XMLHttpRequest,r=L.p+""+i+".hot-update.json";o.open("GET",r,!0),o.timeout=t,o.send(null)}catch(e){return n(e)}o.onreadystatechange=function(){if(4===o.readyState)if(0===o.status)n(new Error("Manifest request to "+r+" timed out."));else if(404===o.status)e();else if(200!==o.status&&304!==o.status)n(new Error("Manifest request to "+r+" failed."));else{try{var t=JSON.parse(o.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;k={},w={},A=e.c,b=e.h,h("prepare");var t=new Promise(function(e,t){y={resolve:e,reject:t}});for(var n in m={},P)j(n);return"prepare"===d&&0===v&&0===g&&E(),t});var t}function j(e){A[e]?(k[e]=!0,g++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=L.p+""+e+"."+i+".hot-update.js",t.appendChild(n)}(e)):w[e]=!0}function E(){h("ready");var e=y;if(y=null,e)if(a)Promise.resolve().then(function(){return C(a)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(O(n));e.resolve(t)}}function C(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var n,o,r,a,s;function u(e){for(var t=[e],n={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var r=o.pop(),i=r.id,s=r.chain;if((a=x[i])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:i};if(a.hot._main)return{type:"unaccepted",chain:s,moduleId:i};for(var c=0;c<a.parents.length;c++){var l=a.parents[c],u=x[l];if(u){if(u.hot._declinedDependencies[i])return{type:"declined",chain:s.concat([l]),moduleId:i,parentId:l};-1===t.indexOf(l)&&(u.hot._acceptedDependencies[i]?(n[l]||(n[l]=[]),f(n[l],[i])):(delete n[l],t.push(l),o.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&e.push(o)}}t=t||{};var p={},y=[],g={},v=function(){console.warn("[HMR] unexpected require("+k.moduleId+") to disposed module")};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var k;s=O(w);var S=!1,j=!1,E=!1,C="";switch((k=m[w]?u(s):{type:"disposed",moduleId:w}).chain&&(C="\nUpdate propagation: "+k.chain.join(" -> ")),k.type){case"self-declined":t.onDeclined&&t.onDeclined(k),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+k.moduleId+C));break;case"declined":t.onDeclined&&t.onDeclined(k),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+k.moduleId+" in "+k.parentId+C));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(k),t.ignoreUnaccepted||(S=new Error("Aborted because "+s+" is not accepted"+C));break;case"accepted":t.onAccepted&&t.onAccepted(k),j=!0;break;case"disposed":t.onDisposed&&t.onDisposed(k),E=!0;break;default:throw new Error("Unexception type "+k.type)}if(S)return h("abort"),Promise.reject(S);if(j)for(s in g[s]=m[s],f(y,k.outdatedModules),k.outdatedDependencies)Object.prototype.hasOwnProperty.call(k.outdatedDependencies,s)&&(p[s]||(p[s]=[]),f(p[s],k.outdatedDependencies[s]));E&&(f(y,[k.moduleId]),g[s]=v)}var _,T=[];for(o=0;o<y.length;o++)s=y[o],x[s]&&x[s].hot._selfAccepted&&T.push({module:s,errorHandler:x[s].hot._selfAccepted});h("dispose"),Object.keys(A).forEach(function(e){!1===A[e]&&function(e){delete P[e]}(e)});for(var R,F,G=y.slice();G.length>0;)if(s=G.pop(),a=x[s]){var M={},N=a.hot._disposeHandlers;for(r=0;r<N.length;r++)(n=N[r])(M);for(c[s]=M,a.hot.active=!1,delete x[s],delete p[s],r=0;r<a.children.length;r++){var U=x[a.children[r]];U&&((_=U.parents.indexOf(s))>=0&&U.parents.splice(_,1))}}for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(a=x[s]))for(F=p[s],r=0;r<F.length;r++)R=F[r],(_=a.children.indexOf(R))>=0&&a.children.splice(_,1);for(s in h("apply"),i=b,g)Object.prototype.hasOwnProperty.call(g,s)&&(e[s]=g[s]);var D=null;for(s in p)if(Object.prototype.hasOwnProperty.call(p,s)&&(a=x[s])){F=p[s];var I=[];for(o=0;o<F.length;o++)if(R=F[o],n=a.hot._acceptedDependencies[R]){if(-1!==I.indexOf(n))continue;I.push(n)}for(o=0;o<I.length;o++){n=I[o];try{n(F)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:F[o],error:e}),t.ignoreErrored||D||(D=e)}}}for(o=0;o<T.length;o++){var W=T[o];s=W.module,l=[s];try{L(s)}catch(e){if("function"==typeof W.errorHandler)try{W.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:n,originalError:e}),t.ignoreErrored||D||(D=n),D||(D=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||D||(D=e)}}return D?(h("fail"),Promise.reject(D)):(h("idle"),new Promise(function(e){e(y)}))}var x={},P={0:0},_=[];function L(t){if(x[t])return x[t].exports;var n=x[t]={i:t,l:!1,exports:{},hot:f(t),parents:(u=l,l=[],u),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=x[e];if(!t)return L;var n=function(n){return t.hot.active?(x[n]?-1===x[n].parents.indexOf(e)&&x[n].parents.push(e):(l=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),l=[]),L(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return L[e]},set:function(t){L[e]=t}}};for(var a in L)Object.prototype.hasOwnProperty.call(L,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(n,a,o(a));return n.e=function(e){return"ready"===d&&h("prepare"),v++,L.e(e).then(t,function(e){throw t(),e});function t(){v--,"prepare"===d&&(w[e]||j(e),0===v&&0===g&&E())}},n.t=function(e,t){return 1&t&&(e=n(e)),L.t(e,-2&t)},n}(t)),n.l=!0,n.exports}L.m=e,L.c=x,L.d=function(e,t,n){L.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},L.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},L.t=function(e,t){if(1&t&&(e=L(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(L.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)L.d(n,o,function(t){return e[t]}.bind(null,o));return n},L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,"a",t),t},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},L.p="",L.h=function(){return i};var T=window.webpackJsonp=window.webpackJsonp||[],R=T.push.bind(T);T.push=t,T=T.slice();for(var F=0;F<T.length;F++)t(T[F]);var G=R;_.push([388,1]),n()}({215:function(e,t,n){},218:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},276:function(e){e.exports={en:{Account:"Account","Account changed, page will reload!":"Account changed, app will reload!",Add:"Add","Add any GPX, GeoJSON, KML files or WMS layers to map from layers menu or drag and drop file.":"Add any GPX, GeoJSON, KML files or WMS layers to map from layers menu or drag and drop file.","Add caches and map objects to geotrip. Reorder geotrip.":"Add caches and map objects to geotrip. Reorder geotrip.","Add caches to map":"Add caches to map","Add features from map":"Add features from map","Add File layer":"Add File layer","Add geocaches to map":"Add geocaches to map","Add to geotrip":"Add to geotrip","Add WMS layer":"Add WMS layer",Added:"Added",Aerial:"Aerial","Aerial Estonia":"Aerial Estonia","An unknown error occurred.":"An unknown error occurred.","and copy page content to textbox below":"and copy page content to textbox below","and drop it on map or import file from layers menu":"and drop it on map or import file from layers menu","and log in":"and log in",Angle:"Angle","App resetted, page will reload!":"App resetted, app will reload!","App will recognize if geocaches are added to map.":"App will recognize if geocaches are added to map.",Archived:"Archived",Area:"Area",Available:"Available","Bookmark deleted!":"Bookmark deleted!",Caches:"Caches","Change language. App will reload after change!":"Change language. App will reload after change!","Clear trip":"Clear trip",Close:"Close",Coordinate:"Coordinate",Coordinates:"Coordinates","copied to clipboard":"copied to clipboard",Debug:"Debug","Debug changed, app will reload!":"Debug changed, app will reload!","Debug mode. Will write debug logs into file. App will reload after change!":"Debug mode. Will write debug logs into file. App will reload after change!",Download:"Download","Download debug log":"Download debug log","download GPX from":"download GPX from","Edit OSM here":"Edit OSM here","Empty file":"Empty file","Enter geopeitus.ee or geocaching.com username. App will reload after change!":"Enter geopeitus.ee or geocaching.com username. App will reload after change!","Error creating layer":"Error creating layer",Feature:"Feature",Features:"Features",features:"features",Filter:"Filter","Filter and search caches on map.":"Filter and search caches on map.","Find streetview link and measure tools from context menu.":"Find streetview link and measure tools from context menu.",Found:"Found",GeocacheLoader:"Load geocaches",Geocaches:"Geocaches","Geocache|Event Cache":"Event Cache","Geocache|Letterbox Hybrid":"Letterbox Hybrid","Geocache|Locationless Cache":"Locationless Cache","Geocache|Multi-cache":"Multi-cache","Geocache|Traditional Cache":"Traditional Cache","Geocache|Unknown Cache":"Unknown Cache","Geocache|Virtual Cache":"Virtual Cache","Geocache|Webcam Cache":"Webcam Cache","Geocache|Whereigo Cache":"Whereigo Cache","Geop is progressive web application with partial offline support.":"Geop is progressive web application with partial offline support.",Geotrip:"Geotrip","Go to":"Go to",gpxActive:"Active caches",gpxAll:"All caches (active, archived, unavailable)",here:"here","Insert WMS v.1.1.1 URL with LAYERS and SRS parameters":"Insert WMS v.1.1.1 URL with LAYERS and SRS parameters","Install app to home screen":"Install app to home screen","Install it to Your home screen.":"Install it to Your home screen.","Install web app to your home screen.":"Install web app to your home screen.","Keep awake":"Keep awake","Keep screen on. Use with caution, might train device battery!":"Keep screen on. Use with caution, might train device battery!",Language:"Language","Language changed, page will reload!":"Language changed, app will reload!",Large:"Large",Layers:"Layers",Length:"Length","Location information is unavailable.":"Location information is unavailable.",Map:"Map",Measure:"Measure",Micro:"Micro","Missing LAYERS parameter":"Missing LAYERS parameter","Missing SRS parameter":"Missing SRS parameter","My location":"My location","Navigate to cache with two tracking mode":"Navigate to cache with two tracking mode","NB! Turning this off and sharing bookmark will store possibly big amount of data in service. It might fail. Use with caution!":"NB! Turning this off and sharing bookmark will store possibly big amount of data in service. It might fail. Use with caution!","New Cache":"New Cache","No baselyers added":"No baselyers added","No overlays added":"No overlays added","No result":"No result","No valid input coordinates, aborting!":"No valid input coordinates, aborting!","North up!":"North up!","Not Found":"Not Found","Not valid GeoJSON":"Not valid GeoJSON",Off:"Off",On:"On",or:"or","or open":"or open",Owner:"Owner","Query string empty, aborting!":"Query string empty, aborting!","Query string too short, aborting!":"Query string too short, aborting!","Quick links":"Quick links",Radius:"Radius",Regular:"Regular",Reset:"Reset","Reset app":"Reset app","Reset app to default. App will reload!":"Reset app to default. App will reload!",Search:"Search","Search and display coordinates in WGS, L-Est, UTM and MGRS system.":"Search and display coordinates in WGS, L-Est, UTM and MGRS system.","Search coordinates":"Search coordinates",Settings:"Settings",Share:"Share","Share bookmark":"Share bookmark","Share only features added to geotrip.":"Share only features added to geotrip.","Share only geotrip features":"Share only geotrip features","Share snapshot of app state via link or QR-code. Download geotrip as GPX-file.":"Share snapshot of app state via link or QR-code. Download geotrip as GPX-file.","Show 160m radius":"Show 160m radius",Small:"Small","Street view":"Street view","The request to get user location timed out.":"The request to get user location timed out.","to finish, click on beginning":"to finish, click on beginning","to finish, click on end":"to finish, click on end","Toggle fullscreen":"Toggle fullscreen",Topo:"Topo","Unable to copy to clipboard":"Unable to copy to clipboard","Unable to delete bookmark":"Unable to delete bookmark","Unable to find layer extent":"Unable to find layer extent","Unable to find location.":"Unable to find location.","Unable to get routing result":"Unable to get routing result!","Unable to load bookmark":"Unable to load bookmark","Unable to perform search!":"Unable to perform search!","Unable to save bookmark":"Unable to save bookmark",Unavailable:"Unavailable",Unknown:"Unknown","Unsupported file type":"Unsupported file type",URL:"URL","URL is not valid WMS resource!":"URL is not valid WMS resource!","User denied the request for Geolocation.":"User denied the request for Geolocation.",Username:"Username","Waypoint|Final Location":"Final Location","Waypoint|Parking Area":"Parking Area","Waypoint|Physical Stage":"Physical Stage","Waypoint|Reference Point":"Reference Point","Waypoint|Stages of a Multicache":"Stages of a Multicache","Waypoint|Trailhead":"Trailhead","Waypoint|Virtual Stage":"Virtual Stage","Zoom in":"Zoom in","Zoom out":"Zoom out"},et:{Account:"Konto","Account changed, page will reload!":"Konto muudetud, teeme restardi!",Add:"Lisa","Add any GPX, GeoJSON, KML files or WMS layers to map from layers menu or drag and drop file.":"Lisa GPX, GeoJSON, KML fail või WMS kiht kaardile. Kasuta kihtide menüüd või lohista fail kaardile.","Add caches and map objects to geotrip. Reorder geotrip.":"Lisa aardeid ja kaardiobjekte geotuurile. Järjesta geotuuri.","Add caches to map":"Lisa aardeid kaardile","Add features from map":"Lisa kaardilt objekte","Add File layer":"Lisa fail","Add geocaches to map":"Lisa aarded kaardile","Add to geotrip":"Lisa geotuuri","Add WMS layer":"Lisa WMS",Added:"Lisatud",Aerial:"Satipilt","Aerial Estonia":"Foto","An unknown error occurred.":"Tekkis tundmatu viga.","and copy page content to textbox below":"ja kopeeri lehe sisu alla tekstikasti","and drop it on map or import file from layers menu":"ja lohista fail kaardile või impordi fail kihtide menüüst","and log in":"ja logi sisse",Angle:"Nurk","App resetted, page will reload!":"Rakendus lähtestatud, teeme restardi!","App will recognize if geocaches are added to map.":"Rakendus saab aru, kui aarded on kaardile lisatud.",Archived:"Arhiveeritud",Area:"Pindala",Available:"Aktiivsed","Bookmark deleted!":"Järjehoidja kustutatud!",Caches:"Aarded","Change language. App will reload after change!":"Muuda rakenduse keel. Rakendus taaskäivitub peale muutmist!","Clear trip":"Tühjenda",Close:"Sulge",Coordinate:"Koordinaat",Coordinates:"Koordinaadid","copied to clipboard":"kopeeritud",Debug:"Silumine","Debug changed, app will reload!":"Silumisrežiimi muutus. Rakendus taaskäivitub!","Debug mode. Will write debug logs into file. App will reload after change!":"Silumisrežiim. Silumise logid kirjutatakse faili. Rakendus taaskäivitub peale muutmist!",Download:"Lae alla","Download debug log":"Lae alla logifail","download GPX from":"lae GPX","Edit OSM here":"Muuda OSMi","Empty file":"Tühi fail","Enter geopeitus.ee or geocaching.com username. App will reload after change!":"Sisesta geopeitus.ee või geocaching.com kasutajanimi. Rakendus taaskäivitub peale muutmist!","Error creating layer":"Kihi loomine ebaõnnestus",Feature:"Objekt",Features:"Objektid",features:"objekti",Filter:"Filter","Filter and search caches on map.":"Filtreeri ja otsi aardeid.","Find streetview link and measure tools from context menu.":"Parema kliki menüüst leiad tänavavaate ja mõõtmise tööriistad.",Found:"Leitud",GeocacheLoader:"Lae aarded",Geocaches:"Aarded","Geocache|Event Cache":"Sündmusaare","Geocache|Letterbox Hybrid":"Kirjakastiaare","Geocache|Locationless Cache":"Asukohata aare","Geocache|Multi-cache":"Multiaare","Geocache|Traditional Cache":"Tavaline aare","Geocache|Unknown Cache":"Mõistatusaare","Geocache|Virtual Cache":"Virtuaalne aare","Geocache|Webcam Cache":"Veebikaamera aare","Geocache|Whereigo Cache":"Whereigo aare","Geop is progressive web application with partial offline support.":"Geop on progressiivne veebirakendus (PWA) osalise võrguta töötamise toega.",Geotrip:"Geotuur","Go to":"Mine",gpxActive:"Aktiivsed aarded",gpxAll:"Kõik aarded (aktiivsed, arhiveeritud, ajutiselt kättesaamatud)",here:"siit","Insert WMS v.1.1.1 URL with LAYERS and SRS parameters":"Sisesta siia kasti WMS (1.1.1) aadress koos LAYERS ja SRS parameetriga","Install app to home screen":"Paigalda rakendus","Install it to Your home screen.":"Paigalda rakendus avalehele.","Install web app to your home screen.":"Paigalda rakendus oma seadmesse.","Keep awake":"Hoia ekraan töös","Keep screen on. Use with caution, might train device battery!":"Hoia ekraan aktiivne. Pidevalt töötav ekraan kulutab akut!",Language:"Keel","Language changed, page will reload!":"Keel muudetud, teeme restardi!",Large:"Suur",Layers:"Kihid",Length:"Vahemaa","Location information is unavailable.":"Asukoha info ei ole kättesaadav.",Map:"Kaart",Measure:"Mõõda",Micro:"Mikro","Missing LAYERS parameter":"WMS aadress peab sisaldama LAYERS parameetrit","Missing SRS parameter":"WMS aadress peab sisaldama SRS parameetrit","My location":"Asukoht","Navigate to cache with two tracking mode":"Asukoha näitamine kahes režiimis (asukoht liigub ekraanil; asukoht on ekraanil fikseeritud).","NB! Turning this off and sharing bookmark will store possibly big amount of data in service. It might fail. Use with caution!":"NB! Ei soovita seda välja lülitada, järjehoidja salvestamisel võidakse saata teenusesse suur hulk andmeid!","New Cache":"Uued aarded","No baselyers added":"Pole aluskaarte","No overlays added":"Pole kaardikihte","No result":"Otsingutulemused puuduvad","No valid input coordinates, aborting!":"Sisendkoordinaadid ei vasta nõuetele, ei otsi!","North up!":"Põhi!","Not Found":"Leidmata","Not valid GeoJSON":"Ei ole korrektne GeoJSON",Off:"Off",On:"On",or:"või","or open":"või ava",Owner:"Omanik","Query string empty, aborting!":"Otsingutekst puudu, ei otsi!","Query string too short, aborting!":"Otsingutekst liiga lühike, ei otsi!","Quick links":"Kiirviited",Radius:"Raadius",Regular:"Normaalne",Reset:"Lähtesta","Reset app":"Rakenduse vaikeseaded","Reset app to default. App will reload!":"Taasta rakenduse vaikeseaded. Rakendus taaskäivitub peale muutmist!",Search:"Otsi","Search and display coordinates in WGS, L-Est, UTM and MGRS system.":"Otsi ja kuva koordinaate WGS, L-Est, UTM ja MGRS koordinaatsüsteemides.","Search coordinates":"Otsi koordinaate",Settings:"Seaded",Share:"Jaga","Share bookmark":"Jaga järjehoidjat","Share only features added to geotrip.":"Jaga ainult objekte, mis on lisatud geotuurile.","Share only geotrip features":"Jaga ainult geotuuri","Share snapshot of app state via link or QR-code. Download geotrip as GPX-file.":"Jaga kaardivaadet lingi või QR-koodiga. Ekspordi geotripp GPX-failina.","Show 160m radius":"Näita 160m raadiuseid",Small:"Väike","Street view":"Tänavavaade","The request to get user location timed out.":"Asukoha päring ebaõnnestus.","to finish, click on beginning":"lõpetamiseks vajuta algusesse","to finish, click on end":"lõpetamiseks vajuta viimasele","Toggle fullscreen":"Täisekraan",Topo:"Põhikaart","Unable to copy to clipboard":"Ei saanud kopeerida","Unable to delete bookmark":"Ei saanud järjehoidjat kustutada!","Unable to find layer extent":"Ei leia kihi ulatust","Unable to find location.":"Ei leia asukohta!","Unable to get routing result":"Tulemus puudub!","Unable to load bookmark":"Ei saanud järjehoidjat laadida!","Unable to perform search!":"Otsing luhtus!","Unable to save bookmark":"Ei saanud järjehoidjat salvestada!",Unavailable:"Ajutiselt kättesaamatud",Unknown:"Teadmata","Unsupported file type":"Seda faili ei toeta hetkel",URL:"URL","URL is not valid WMS resource!":"URL ei ole õige!","User denied the request for Geolocation.":"Kasutaja tühistas päringu.",Username:"Kasutajanimi","Waypoint|Final Location":"Lõpp-punkt","Waypoint|Parking Area":"Parkla","Waypoint|Physical Stage":"Vahepunkt","Waypoint|Reference Point":"Lisapunkt","Waypoint|Stages of a Multicache":"Vahepunkt","Waypoint|Trailhead":"Matkaraja algus","Waypoint|Virtual Stage":"Virtuaalne vahepunkt","Zoom in":"Suurenda","Zoom out":"Vähenda"}}},328:function(e,t,n){var o=n(215);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(215,function(){var t=n(215);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},332:function(e,t,n){var o=n(218);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(218,function(){var t=n(218);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},361:function(e,t,n){var o=n(223);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(223,function(){var t=n(223);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},362:function(e,t,n){var o=n(224);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(224,function(){var t=n(224);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},365:function(e,t,n){var o=n(225);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(225,function(){var t=n(225);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},366:function(e,t,n){var o=n(226);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(226,function(){var t=n(226);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},367:function(e,t,n){var o=n(227);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(227,function(){var t=n(227);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},368:function(e,t,n){var o=n(228);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(228,function(){var t=n(228);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},369:function(e,t,n){var o=n(229);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(229,function(){var t=n(229);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},373:function(e,t,n){var o=n(230);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(230,function(){var t=n(230);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},374:function(e,t,n){var o=n(231);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(231,function(){var t=n(231);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},375:function(e,t,n){var o=n(232);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(232,function(){var t=n(232);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},376:function(e,t,n){var o=n(233);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(233,function(){var t=n(233);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},377:function(e,t,n){var o=n(234);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(234,function(){var t=n(234);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},378:function(e,t,n){var o=n(235);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(235,function(){var t=n(235);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},379:function(e,t,n){var o=n(236);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(236,function(){var t=n(236);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},380:function(e,t,n){var o=n(237);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(237,function(){var t=n(237);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},381:function(e,t,n){var o=n(238);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(238,function(){var t=n(238);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},382:function(e,t,n){var o=n(239);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(239,function(){var t=n(239);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},383:function(e,t,n){var o=n(240);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(240,function(){var t=n(240);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},384:function(e,t,n){var o=n(241);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(241,function(){var t=n(241);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},385:function(e,t,n){var o=n(242);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(242,function(){var t=n(242);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},386:function(e,t,n){var o=n(243);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(243,function(){var t=n(243);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},387:function(e,t,n){var o=n(244);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},a=n(39)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(244,function(){var t=n(244);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},388:function(e,t,n){"use strict";n.r(t);n(121),n(33),n(38),n(19),n(28),n(251),n(127),n(21),n(89),n(25),n(26),n(53),n(54),n(260),n(90),n(61),n(313);var o=n(273),r=n.n(o),a=n(274),i=n.n(a),s=n(92),c=n(175);n(317);function l(e){return function(e){for(var t=2,n="",o=e.length,r=0,a=0;a<o;a++)t=a%3,a>0&&4*a/3%76==0&&(n+="\r\n"),r|=e[a]<<(16>>>t&24),2!==t&&e.length-a!=1||(n+=String.fromCharCode(u(r>>>18&63),u(r>>>12&63),u(r>>>6&63),u(63&r)),r=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}(function(e){for(var t,n,o=e.length,r=0,a=0;a<o;a++)n=e.charCodeAt(a),r+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(r);for(var i=0,s=0;i<r;s++)(n=e.charCodeAt(s))<128?t[i++]=n:n<2048?(t[i++]=192+(n>>>6),t[i++]=128+(63&n)):n<65536?(t[i++]=224+(n>>>12),t[i++]=128+(n>>>6&63),t[i++]=128+(63&n)):n<2097152?(t[i++]=240+(n>>>18),t[i++]=128+(n>>>12&63),t[i++]=128+(n>>>6&63),t[i++]=128+(63&n)):n<67108864?(t[i++]=248+(n>>>24),t[i++]=128+(n>>>18&63),t[i++]=128+(n>>>12&63),t[i++]=128+(n>>>6&63),t[i++]=128+(63&n)):(t[i++]=252+n/1073741824,t[i++]=128+(n>>>24&63),t[i++]=128+(n>>>18&63),t[i++]=128+(n>>>12&63),t[i++]=128+(n>>>6&63),t[i++]=128+(63&n));return t}(e))}function u(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=new r.a,d=[];function h(e){return new Promise(function(t,n){try{var o=document.createElement("textarea");o.value=e,o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.select();var r=document.execCommand("copy");document.body.removeChild(o),r?t():n(Error(r))}catch(e){n(e)}})}function y(e,t){!function(e,t){var n=document.createEvent("MouseEvent"),o=document.createElement("a");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.setAttribute("href",t),o.setAttribute("download",e),o.dispatchEvent(n)}(e,"data:text/gpx+xml;base64,"+l('<?xml version="1.0" encoding="utf-8"?>'+(new c.a).writeFeatures(t)))}function m(){p.enable(),document.removeEventListener("click",m,!1)}function b(e){return 360*e/(2*Math.PI)}function g(e){return e*Math.PI*2/360}function v(e){return 1/Math.cos(g(e[1]))}function w(e){if(e&&e.length>1)try{return JSON.parse('{"'+e.slice(1).replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})}catch(e){return null}}function k(e){var t=e.match(/^(?:(https?:)\/\/)?(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7],query:w(t[6])}}function A(){return Math.random().toString(36).substr(2,10)}function O(e,t){var n;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3===(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(",")+","+t+")";throw new Error("Bad Hex")}function S(e){var t=Object(s.c)(e);return t>1e4?"".concat(Math.round(t/1e3*100)/100," km"):"".concat(Math.round(100*t)/100," m")}function j(e){var t=Object(s.a)(e);return t>1e6?"".concat(Math.round(t/1e6*100)/100," km<sup>2</sup>"):"".concat(Math.round(100*t)/100," m<sup>2</sup>")}function E(e){var t=new Date(e),n=(1+t.getMonth()).toString();n=n.length>1?n:"0"+n;var o=t.getDate().toString();return o=o.length>1?o:"0"+o,t.getFullYear()+"."+n+"."+o}function C(e){return JSON.parse(JSON.stringify(e))}var x=!0,P={oldURL:null,newURL:null,hash:null},_=[];function L(e){var t={};return e&&e.slice(1).split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t}function T(e){return e?P.hash[e]:P.hash}function R(e){if(x){var t;if(e){var n=Object.assign(P.hash,e);Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]||delete n[e]}),P.hash=n,t=function(e){return"#"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}(P.hash)}else P.hash=e,t=" ";window.history.pushState(P.hash,"geop",t)}else x=!0}function F(e){_.push(e)}function G(e){return[Math.round(1e5*e.center[1])/1e5,Math.round(1e5*e.center[0])/1e5,Math.round(100*e.zoom)/100,parseInt(e.rotation),e.baseLayer].join("-")}var M={locale:"et",layerManager:!0,searchEnabled:!0,locateEnabled:!0,mouseCoordinates:!0,settings:!0,tooltip:!0,featureInfo:!0,scaleLine:!0,streetView:!0,measureTool:!0,fullScreen:!0,mousePosition:!0,geoLocation:!0,shareState:!0,shareOnlyTripFeatures:!0,settingsTabOpen:"settings-tab",debug:!1,debugFile:"geop_debug.log"},N={el:"#map",center:[25.5,58.5],zoom:7,rotation:0,extent:[21,57,29,60],projection:"EPSG:3857",baseLayer:"osm",minZoom:0,maxZoom:20,clustered:!1},U={streetview:"https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=",ideditor:"https://www.openstreetmap.org/edit?editor=id#background=custom:http://tiles.maaamet.ee/tm/tms/1.0.0/foto@GMC/{z}/{x}/{-y}.png&map=",nominatim:"https://nominatim.openstreetmap.org",jsonstore:"https://www.jsonstore.io/4d04eefd7ed4c19866cefcf038d0bebe95786bf33f0e60fdfbd8a554e6ae2670",qrcode:"http://api.qrserver.com/v1/create-qr-code/?size=150x150&data="},D={authUrl:"http://geopeitus.ee",downloadUrl:{page:"http://www.geopeitus.ee/index.php?p=300",geojson:"http://www.geopeitus.ee/index.php?p=301&status[]=1&format=2",gpx:{gpxActive:"http://www.geopeitus.ee/index.php?p=301&status[]=1&gname=1&format=1",gpxAll:"http://www.geopeitus.ee/index.php?p=301&status[]=1&status[]=2&status[]=3&gname=1&format=1"}},cacheUrl:"http://geopeitus.ee/aare/",radiusStyle:{maxResolution:30,radius:160},newCacheDays:30,waypointMaxResolution:10,overviewMinResolution:100,exportFileName:"geop.gpx",mapping:{fstatusJSON:{0:"Not Found",1:"Found",2:"Owner"},fstatusGPX:{Geocache:"Not Found","Geocache Found":"Found","Geocache Owner":"Owner"},type:{"Tavaline aare":"Geocache|Traditional Cache",Multiaare:"Geocache|Multi-cache",Veebikaamera:"Geocache|Webcam Cache","Virtuaalne aare":"Geocache|Virtual Cache","Sündmusaare":"Geocache|Event Cache","Asukohata (tagurpidi) aare":"Geocache|Locationless Cache","Mõistatusaare":"Geocache|Unknown Cache",Kirjakastiaare:"Geocache|Letterbox Hybrid","KusMaLäen":"Geocache|Whereigo Cache"},container:{mikro:"Micro","väike":"Small",normaalne:"Regular",suur:"Large",muu:"Unknown"}},filter:{fstatus:"fstatusGPX",type:"type",status:["Available","Unavailable","Archived"],newCache:["New Cache"]},styles:{base:{text:"",class:"fas fa-map-marker-alt",font:'900 16px "Font Awesome 5 Free"',textBaseline:"middle",fill:{color:"#aaa"},stroke:{color:"#fff",width:4}},overview:{text:"",class:"fa fa-circle",font:'900 8px "Font Awesome 5 Free"',stroke:{color:"#fff",width:2}},text:{"Geocache|Traditional Cache":{text:"",class:"fa fa-cube",font:'900 13px "Font Awesome 5 Free"'},"Geocache|Multi-cache":{text:"",class:"fa fa-cubes",font:'900 16px "Font Awesome 5 Free"'},"Geocache|Webcam Cache":{text:"",class:"fa fa-camera",font:'900 12px "Font Awesome 5 Free"'},"Geocache|Virtual Cache":{text:"",class:"fa fa-wifi",font:'900 12px "Font Awesome 5 Free"'},"Geocache|Event Cache":{text:"",class:"fa fa-calendar-check-o",font:'900 12px "Font Awesome 5 Free"'},"Geocache|Locationless Cache":{text:"",class:"fa fa-refresh",font:'900 12px "Font Awesome 5 Free"'},"Geocache|Unknown Cache":{text:"",class:"fa fa-question-circle",font:'900 13px "Font Awesome 5 Free"'},"Geocache|Letterbox Hybrid":{text:"",class:"fa fa-envelope",font:'900 12px "Font Awesome 5 Free"'},"Geocache|Whereigo Cache":{text:"",class:"fa fa-arrow-circle-right",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Parking Area":{text:"",class:"fas fa-parking",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Reference Point":{text:"",class:"far fa-arrow-alt-circle-down",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Stages of a Multicache":{text:"",class:"fas fa-plus-circle",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Physical Stage":{text:"",class:"fas fa-plus-circle",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Virtual Stage":{text:"",class:"fas fa-plus-circle",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Final Location":{text:"",class:"far fa-times-circle",font:'900 12px "Font Awesome 5 Free"'},"Waypoint|Trailhead":{text:"",class:"far fa-hiking",font:'900 12px "Font Awesome 5 Free"'}},color:{"Not Found":{fill:{color:"#444"}},Found:{fill:{color:"#4c9900"}},Owner:{fill:{color:"red"}}},newCache:{"New Cache":{stroke:{color:"#ffff00",width:4}}},radiusStyle:{fill:{color:"rgba(255, 0, 0, 0.1)"}}}},I={baseLayers:{osm:{type:"XYZ",title:"OSM",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",projection:"EPSG:3857",crossOrigin:null},photo:{type:"Bing",title:"Aerial",key:"AozX0lfGO2nv-11kPOU6_BKWeJwgfAcyFQAXAwXQmnQtSJahtmYj8ZJ3JAzk36Z4",projection:"EPSG:3857",imagerySet:"AerialWithLabels",maxZoom:19},makaart:{type:"Group",title:"Map",projection:"EPSG:3301",layers:[{type:"XYZ",projection:"EPSG:3857",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/kaart@GMC/{z}/{x}/{-y}.png",minResolution:.5,crossOrigin:null},{type:"TileWMS",url:"http://kaart.maaamet.ee/wms/kaart",params:{LAYERS:"MA-KAART",TILED:!0,FORMAT:"image/png",VERSION:"1.1.1"},maxResolution:.75,tileSize:1024,gutter:20,crossOrigin:null}]},mapkaart:{type:"Group",title:"Topo",projection:"EPSG:3301",layers:[{type:"XYZ",projection:"EPSG:3857",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/kaart@GMC/{z}/{x}/{-y}.png",minResolution:7.1,crossOrigin:null},{type:"XYZ",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/reljeef@LEST/{z}/{x}/{-y}.png",minResolution:7.1,crossOrigin:null,opacity:.5},{type:"XYZ",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/epk_vv@LEST/{z}/{x}/{-y}.png",minResolution:.5,maxResolution:7.1,crossOrigin:null},{type:"TileWMS",url:"http://kaart.maaamet.ee/wms/alus",params:{LAYERS:"pohi_vv",TILED:!0,FORMAT:"image/png",VERSION:"1.1.1"},maxResolution:.75,tileSize:1024,gutter:20,crossOrigin:null}]},maorto:{type:"Group",title:"Aerial Estonia",projection:"EPSG:3301",layers:[{type:"XYZ",projection:"EPSG:3857",url:"https://tiles.maaamet.ee/tm/tms/1.0.0/foto@GMC/{z}/{x}/{-y}.png",minResolution:.5,crossOrigin:null},{type:"TileWMS",url:"http://kaart.maaamet.ee/wms/fotokaart",params:{LAYERS:"EESTIFOTO",TILED:!0,FORMAT:"image/png",VERSION:"1.1.1"},maxResolution:.75,tileSize:1024,gutter:20,crossOrigin:null}]},okaart:{type:"XYZ",title:"O-kaart",url:"https://okaart.osport.ee/{z}/{x}/{y}.png",projection:"EPSG:3857",crossOrigin:null}},layers:[],overlays:[]},W=n(170);function B(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}var V={},q={},H=!!window.indexedDB;function z(){return new Promise(function(e,t){if(H)try{Object(W.c)().then(function(){var t,n=(t=regeneratorRuntime.mark(function t(n){var o,r,a,i,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o={},r=!0,a=!1,i=void 0,t.prev=4,s=n[Symbol.iterator]();case 6:if(r=(c=s.next()).done){t.next=15;break}return l=c.value,t.next=10,Object(W.b)(l);case 10:null!=(u=t.sent)&&(o[l]=u);case 12:r=!0,t.next=6;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),a=!0,i=t.t0;case 21:t.prev=21,t.prev=22,r||null==s.return||s.return();case 24:if(t.prev=24,!a){t.next=27;break}throw i;case 27:return t.finish(24);case 28:return t.finish(21);case 29:e(C(o));case 30:case"end":return t.stop()}},t,this,[[4,17,21,29],[22,,24,28]])}),function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function i(e){B(a,o,r,i,s,"next",e)}function s(e){B(a,o,r,i,s,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}())}catch(e){t(e)}else t(new Error("Storage is not available"))})}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];V[e]=t,n&&H?Object(W.d)(e,t).then(function(){e in q&&q[e].forEach(function(t){return t(V[e])})}):e in q&&q[e].forEach(function(t){return t(V[e])})}function J(e){return V[e]}function Z(e,t){e in q||(q[e]=[]),-1===q[e].indexOf(t)&&q[e].push(t)}function X(){Object(W.a)()}n(41),n(323),n(325),n(32),n(160),n(5),n(30),n(76),n(62),n(142);function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.el=null,this.state={},this.create(),this.components={}}var t,n,o;return t=e,(n=[{key:"create",value:function(){this.target&&this.el&&(this.target.append(this.el),this.render())}},{key:"render",value:function(){}},{key:"renderComponents",value:function(){}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getEl",value:function(){return this.el}},{key:"set",value:function(e,t){this.state[e]=t}},{key:"get",value:function(e){return this.state[e]}},{key:"destroy",value:function(){var e=this;Object.keys(this.components).forEach(function(t){return e.components[t].destroy()}),this.components={},this.el.remove()}}])&&K(t.prototype,n),o&&K(t,o),e}(),$={locale:null,texts:{}};function ee(e,t){e&&e in t&&($.texts=t,$.locale=e),Y("app/locale",$.locale,!0)}function te(e){return e in $.texts[$.locale]?$.texts[$.locale][e]:e}var ne=n(155),oe=4e3;function re(e,t,n){switch(e){case"success":!function(e,t){ne.a.success(e,"",void 0,t)}(t);break;case"info":!function(e,t){ne.a.info(e,"",void 0,t)}(t);break;case"warning":!function(e,t){ne.a.warn(e,"",void 0,t)}(t);break;case"error":!function(e,t){ne.a.error(e,"",void 0,t)}(t)}"function"==typeof n&&setTimeout(n,oe)}ne.a.init({timeout:oe});var ae=n(7),ie=n.n(ae),se=n(164),ce=n.n(se),le=n(275),ue=n.n(le);n(328);function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ye(this,be(t).call(this,e))).el=ie()('\n      <div class="btn-group float-right" id="bookmark"></div>\n    '),n.modal=ie()("#modal_bookmark"),n.state={bookmarks:J("app/bookmarks")||[],bookmark:T("b")},n.create(),n.el.on("click","button.share",function(e){e.preventDefault(),n.share()}),n.el.on("click","li",function(e){e.preventDefault(),n.openModal(ie()(e.currentTarget).data("id"))}),n.el.on("click","li .tools a.remove",function(e){e.preventDefault(),e.stopPropagation(),n.delete(ie()(e.currentTarget).closest("li").data("id"))}),n.modal.on("click","button.copy",function(e){n.copy(ie()(e.target).closest(".modal").find("input").val())}),F(function(e){n.state.bookmark!==e.b&&ti()}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){this.modal&&0!==this.modal.length||(this.modal=ie()('\n        <div class="modal fade"\n          id="modal_bookmark">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <h4 class="modal-title">'.concat(te("Share bookmark"),'</h4>\n                <button type="button"\n                  class="close"\n                  data-dismiss="modal"\n                  aria-label="Close">\n                  <span aria-hidden="true">&times;</span>\n                </button>\n              </div>\n              <div class="modal-body text-muted">\n                <div class="input-group mb-5">\n                  <input type="text" class="form-control" name="bookmark" readonly>\n                  <div class="input-group-append">\n                    <button class="btn btn-secondary copy" type="button">\n                      <i class="far fa-clone"></i>\n                    </button>\n                    <a class="btn btn-secondary go" href="#" target="_blank">\n                      <i class="fas fa-link"></i>\n                    </a>\n                  </div>\n                </div>\n                <div class="mb-5 text-center display-4">\n                  ').concat(te("or"),'\n                </div>\n                <div class="mb-5 text-center">\n                  <canvas class="rounded mx-auto d-block img-thumbnail"></canvas>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ')),ie()("body").append(this.modal)),this.el.html('\n      <div class="btn-group dropup">\n        <button type="button" class="btn btn-secondary share" title="'.concat(te("Share"),'">\n          <i class="fas fa-share-alt"></i>\n        </button>\n        <button ').concat(this.state.bookmarks.length?"":"disabled",'\n          type="button"\n          class="btn btn-secondary dropdown-toggle dropdown-toggle-split"\n          data-toggle="dropdown">\n        </button>\n        <div class="dropdown-menu dropdown-menu-right">\n          ').concat(this.state.bookmarks.map(function(e){return'\n            <li\n              class="dropdown-item"\n              data-id="'.concat(e,'">\n              <i class="fas fa-star"></i>\n              ').concat(e,'\n              <div class="tools">\n                <a href="#" class="remove">\n                  <i class="fa fa-times"></i>\n                </a>\n              </div>\n            </li>')}).join(""),"\n        </div>\n      </div>\n    "))}},{key:"share",value:function(){var e=this,t=J("app/debug");new Promise(function(e,t){z().then(e).catch(t)}).then(function(n){var o;(o=n,new Promise(function(e,t){we&&"function"==typeof we.abort&&we.abort();var n=A();we=ie.a.ajax({type:"POST",crossDomain:!0,url:U.jsonstore+"/"+n,data:JSON.stringify({state:JSON.stringify(ce.a.pack(ke("up",o)))}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(o){o&&o.ok?e(n):t(new Error("Unable to save bookmark"))}).fail(function(n){"abort"===n.statusText?e(null):t(new Error("Unable to save bookmark"))})})).then(function(n){e.state.bookmarks.push(n),Y("app/bookmarks",e.state.bookmarks,!0),e.render(),e.openModal(n),t&&console.debug("Bookmark saved: "+n)}).catch(function(e){re("error",te(e.message)),t&&console.error("Bookmark error [setBookmarkState]: "+JSON.stringify(e))})}).catch(function(e){re("error",te(e.message)),t&&console.error("Bookmark error [getSessionState]: "+JSON.stringify(e))})}},{key:"copy",value:function(e){h(e).then(function(){re("success","".concat(te("URL")," ").concat(e," ").concat(te("copied to clipboard")))}).catch(function(){re("error",te("Unable to copy to clipboard"))})}},{key:"delete",value:function(e){var t,n=this,o=J("app/debug");(t=e,new Promise(function(e,n){we&&"function"==typeof we.abort&&we.abort(),we=ie.a.ajax({type:"DELETE",crossDomain:!0,url:U.jsonstore+"/"+t,dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(t){t&&t.ok?e():n(new Error("Unable to delete bookmark"))}).fail(function(t){"abort"===t.statusText?e(null):n(new Error("Unable to delete bookmark"))})})).then(function(){n.state.bookmarks=n.state.bookmarks.filter(function(t){return t!==e}),Y("app/bookmarks",n.state.bookmarks,!0),n.render(),re("success","".concat(te("Bookmark deleted!"))),o&&console.debug("Bookmark deleted: "+e)}).catch(function(e){re("error",te(e.message)),o&&console.error("Bookmark error [deleteBookmarkState]: "+JSON.stringify(e))})}},{key:"bookmarkUrl",value:function(e){return window.location.origin+window.location.pathname+"#b="+e}},{key:"openModal",value:function(e){this.modal.find("input").val(this.bookmarkUrl(e)),this.modal.find("a.go").attr("href",this.bookmarkUrl(e)),new ue.a({element:this.modal.find("canvas")[0],size:200}).value=this.bookmarkUrl(e),this.modal.modal()}},{key:"destroy",value:function(){this.modal.modal("dispose"),this.modal.remove(),this.modal=null,me(be(t.prototype),"destroy",this).call(this)}}])&&he(n.prototype,o),r&&he(n,r),t}(),we=null;function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={};switch(e){case"up":"app_bookmarks"in(o=C(Object.assign.apply(Object,[{}].concat(pe(Object.keys(t).map(function(e){return fe({},e.replace(/\//g,"_"),t[e])}))))))&&delete o.app_bookmarks,"app_bookmark_loaded"in o&&delete o.app_bookmark_loaded,J("app/shareOnlyTripFeatures")&&"geocache_trip_ids"in o&&(o.layer_layers&&o.layer_layers.forEach(function(e){e.features=e.features.filter(function(e){return o.geocache_trip_ids.indexOf(e.id)>-1})}),o.layer_overlays&&o.layer_overlays.forEach(function(e){e.features=e.features.filter(function(e){return o.geocache_trip_ids.indexOf(e.id)>-1})}));break;case"down":o=C(Object.assign.apply(Object,[{}].concat(pe(Object.keys(t).map(function(e){return fe({},e.replace(/_/g,"/"),t[e])}))))),n&&(o["app/bookmark/loaded"]=n);break;default:o=t}return o}function Ae(e){return new Promise(function(t,n){we&&"function"==typeof we.abort&&we.abort(),we=ie.a.ajax({type:"GET",crossDomain:!0,url:U.jsonstore+"/"+e,dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(o){if(o&&o.ok&&o.result&&o.result.state){var r=ke("down",ce.a.unpack(o.result.state),e);t(r)}else n(new Error("Unable to load bookmark"))}).fail(function(e){"abort"===e.statusText?t(null):n(new Error("Unable to load bookmark"))})})}var Oe=ve;function Se(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function je(){return new Promise(function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var o,r,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},r=T("b"),e.prev=2,e.next=5,z();case 5:if(a=e.sent,!r||!r.length){e.next=12;break}return e.next=9,Ae(r);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={};case 13:i=e.t0,e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),a={},i={};case 20:Object.keys(M).forEach(function(e){o["app/"+e]=M[e]}),Object.keys(N).forEach(function(e){o["map/"+e]=N[e]}),Object.keys(I).forEach(function(e){o["layer/"+e]=I[e]}),s=Object.assign({},o,a,i),!1 in window&&(s["app/shareState"]=!1),Object.keys(s).forEach(function(e){Y(e,s[e])}),t(s);case 27:case"end":return e.stop()}},e,this,[[2,16]])}),function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){Se(a,o,r,i,s,"next",e)}function s(e){Se(a,o,r,i,s,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}())}n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(339);var Ee=n(276),Ce=(n(95),n(189)),xe=n(280),Pe=n(291),_e=n(149),Le=n(278),Te=n(279),Re=n(289),Fe=n(290),Ge=n(168),Me=n(77),Ne=n(9),Ue=n(1),De=n(167),Ie=(n(110),n(73)),We=n(80),Be=n(152),Ve=n(169),qe=n(166),He=n(96),ze=n(182);function Ye(e){var t={};return e?Object.keys(e).forEach(function(n){switch(n){case"stroke":t[n]=new We.a(e[n]);break;case"fill":t[n]=new Ie.a(e[n]);break;case"image":case"circle":t.image=new Be.a({fill:e[n].fill&&new Ie.a(e[n].fill),stroke:e[n].stroke&&new We.a(e[n].stroke),radius:e[n].radius||5});break;case"shape":e[n].fill&&(e[n].fill=new Ie.a(e[n].fill)),e[n].stroke&&(e[n].stroke=new We.a(e[n].stroke)),t.image=new ze.a(e[n]);break;case"icon":t.image=new Ve.a(e[n]);break;case"text":e[n].fill&&(e[n].fill=new Ie.a(e[n].fill)),e[n].stroke&&(e[n].stroke=new We.a(e[n].stroke)),t[n]=new qe.a(e[n]);break;default:t[n]=e[n]}},this):t=function(){var e={fill:new Ie.a({color:"rgba(255,255,255,0.4)"}),stroke:new We.a({color:"#3399CC",width:2})};return e.image=new Be.a({fill:e.fill,stroke:e.stroke,radius:5}),e}(),new He.c(t)}function Je(e){return"function"==typeof e?function(t,n){return e(t,n,Ye)}:Array.isArray(e)?e.map(function(e){return Ye(e)}):Ye(e)}var Ze=n(277),Xe=n.n(Ze);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot="EPSG:4326",rt={XYZ:Le.a,TileWMS:Te.a,ImageWMS:Re.a,Bing:Fe.a,Vector:Ge.a},at={geojson:new Me.a},it=function(e){function t(){return Qe(this,t),$e(this,et(t).apply(this,arguments))}return tt(t,Ce["a"]),t}(),st=function(e){function t(e){Qe(this,t);var n={source:new rt[e.type](e)};return $e(this,et(t).call(this,n))}return tt(t,xe["a"]),t}(),ct=function(e){function t(e){Qe(this,t);var n={};if(e.tileSize&&256!==e.tileSize){for(var o=Object(Ne.g)(e.projection).getExtent(),r=Object(Ue.E)(o)/e.tileSize,a=Xe()(N.minZoom,N.maxZoom+1),i=0,s=a.length;i<s;++i)a[i]=r/Math.pow(2,i);n.tileGrid=new De.a({extent:o,resolutions:a,tileSize:[e.tileSize,e.tileSize]})}var c={source:new rt[e.type](Object.assign({},e,n))};return $e(this,et(t).call(this,c))}return tt(t,Pe["a"]),t}(),lt=function(e){function t(e){Qe(this,t);var n=e.features?at.geojson.readFeatures(e,{dataProjection:ot,featureProjection:J("map/projection")}):[],o={source:new Ge.a({features:n}),style:Je(e.style),updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting};return $e(this,et(t).call(this,o))}return tt(t,_e["a"]),t}();function ut(e){var t;switch(e.type){case"Group":var n=e.layers.map(function(t){var n=C(t);return n.projection||(n.projection=e.projection),ut(n)});void 0===e.visible&&(e.visible=!0),t=new it({layers:n});break;case"XYZ":case"TileWMS":case"Bing":t=new ct(C(e));break;case"ImageWMS":t=new st(C(e));break;case"FeatureCollection":t=new lt(e)}return function(e,t){"boolean"==typeof t.visible&&e.setVisible(t.visible);void 0===t.id&&(t.id=A());e.set("id",t.id),t.title&&e.set("title",t.title);t.layerType&&e.set("type",t.type);t.icon&&e.set("icon",t.icon);t.minResolution&&e.setMinResolution(t.minResolution);t.maxResolution&&e.setMaxResolution(t.maxResolution);void 0!==t.opacity&&e.setOpacity(t.opacity);return e.set("conf",t),e}(t,e)}var ft=n(287),pt=n(193),dt=n(281),ht=n(171);n(360),n(361);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e,t,n){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vt(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ht.a.defs("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),ht.a.defs("EPSG:32634","+proj=utm +zone=34 +datum=WGS84 +units=m +no_defs"),ht.a.defs("EPSG:32635","+proj=utm +zone=35 +datum=WGS84 +units=m +no_defs"),Object(dt.a)(ht.a),Object(Ne.g)("EPSG:3301").setExtent([40500,5993e3,1064500,7017e3]);var kt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bt(this,vt(t).call(this,e))).el=ie()('<div id="'.concat(J("map/el").slice(1),'"></div>')),n.create(),n.map=null,n.layers={base:ut({type:"Group",layers:[]}),layers:ut({type:"Group",layers:[]}),overlays:ut({type:"Group",layers:[]})},n.format={geojson:new Me.a},n.activeBaseLayer=null,n.geoLocation=null,n.controls={mouseCoordinates:null},n.overlay=null,n.shouldUpdate=!0;var o=n.permalinkToViewConf(T("view"));return n.createBaseLayers(J("layer/baseLayers"),o?o.baselayer:null),n.createLayers(J("layer/layers")),n.createOverlays(J("layer/overlays")),Y("map/layer/base",n.layers.base.getLayers()),Y("map/layer/layers",n.layers.layers.getLayers()),Y("map/layer/overlays",n.layers.overlays.getLayers()),Y("map/baseLayer",n.activeBaseLayer.get("id"),!0),Y("map/que",[]),n.layers.layers.getLayers().on("add",function(){n.storeLayers("layers")}),n.layers.layers.getLayers().on("remove",function(){n.storeLayers("layers")}),n.layers.overlays.getLayers().on("add",function(){n.storeLayers("overlays")}),n.layers.overlays.getLayers().on("remove",function(){n.storeLayers("overlays")}),Z("layerchange",function(e){n.updateStore(e)}),F(function(e){if(e.view){var t=n.permalinkToViewConf(e.view);t&&n.map.getView().animate({center:Object(Ne.f)(t.center,J("map/projection")),zoom:t.zoom,rotation:g(t.rotation),duration:500})}}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,Q),n=t,(o=[{key:"init",value:function(){var e=this,t=this.permalinkToViewConf(T("view"));this.map=this.createMap(t),Y("map",this.map),this.map.on("moveend",function(e){var t=e.map.getView();Y("map/resolution",t.getResolution()),Y("map/center",Object(Ne.l)(t.getCenter()),!0),Y("map/zoom",t.getZoom(),!0),Y("map/rotation",b(t.getRotation()),!0),R({view:G({center:Object(Ne.l)(t.getCenter()),zoom:t.getZoom(),rotation:b(t.getRotation()),baseLayer:J("map/baseLayer")})})}),J("map/que").forEach(function(t){"function"==typeof t&&t(e.map)})}},{key:"permalinkToViewConf",value:function(e){var t=e?e.split("-"):[];return{center:isNaN(t[1])||isNaN(t[0])?J("map/center"):[Number(t[1]),Number(t[0])],zoom:isNaN(t[2])?J("map/zoom"):Number(t[2]),rotation:isNaN(t[3])?J("map/rotation"):Number(t[3]),baselayer:t[4]||J("map/baseLayer")}}},{key:"createMap",value:function(e){var t=this;return new ft.a({layers:Object.keys(this.layers).map(function(e){return t.layers[e]}),controls:[],target:document.querySelector(J("map/el")),moveTolerance:2,pixelRatio:2,view:new pt.a({projection:J("map/projection"),center:Object(Ne.f)(e.center,J("map/projection")),zoom:e.zoom,rotation:g(e.rotation),maxZoom:J("map/maxZoom"),minZoom:J("map/minZoom")})})}},{key:"createBaseLayers",value:function(e,t){var n=this;Object.keys(e).forEach(function(o){e[o].visible=o===t,e[o].id=o;var r=ut(e[o]);n.addBaseLayer(r),e[o].visible&&(n.activeBaseLayer=r)})}},{key:"createLayers",value:function(e){var t=this;e.forEach(function(e){t.addLayer(ut(e))})}},{key:"createOverlays",value:function(e){var t=this;e.forEach(function(e){t.addOverlay(ut(e))})}},{key:"addBaseLayer",value:function(e){this.layers.base.getLayers().push(e)}},{key:"addLayer",value:function(e){this.layers.layers.getLayers().push(e)}},{key:"addOverlay",value:function(e){this.layers.overlays.getLayers().push(e)}},{key:"getLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e in this.layers)return t?this.layers[e].getLayers().getArray().filter(function(e){return e.get("id")===t})[0]:this.layers[e]}},{key:"storeLayers",value:function(e){Y("layer/"+e,this.layers[e].getLayers().getArray().map(function(e){return e.get("conf")}),!0)}},{key:"updateStore",value:function(e){var t=this.getLayer("overlays",e);if(t){var n=t.get("conf");if("FeatureCollection"===n.type){var o=this.format.geojson.writeFeaturesObject(t.getSource().getFeatures(),{featureProjection:J("map/projection"),dataProjection:"EPSG:4326"});n.features=o.features,t.set("conf",n)}this.storeLayers("overlays")}else;}},{key:"destroy",value:function(){this.map.setTarget(null),this.map=null,gt(vt(t.prototype),"destroy",this).call(this)}}])&&mt(n.prototype,o),r&&mt(n,r),t}();n(362);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function St(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.target||(e.target=ie()("body")),(n=St(this,jt(t).call(this,e.target))).id="sidebar-"+A(),n.el=ie()('<nav id="'.concat(n.id,'" class="sidebar bg-light p-3"></nav>')),n.shadow=ie()('<div id="'.concat(n.id,'-shadow" class="sidebar-shadow"></div>')),n.state={trigger:e.trigger,position:e.position,shadow:e.shadow,active:e.activeComponent},n.trigger=e.trigger,n.create(),n.components=n.renderComponents(n.el.find(" > ul"),n.el.find("> div"),e.components,e.props),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){this.target&&this.el&&(this.target.append(this.el),this.target.append(this.el),this.state.shadow&&this.target.append(this.shadow),this.render())}},{key:"render",value:function(){var e=this;this.el.html('\n      <button type="button" class="close" aria-label="'.concat(te("Close"),'">\n        <i class="fa fa-times"></i>\n      </button>\n      <ul class="nav nav-pills mb-3" role="tablist"></ul>\n      <div class="tab-content"></div>\n    ')),this.trigger.on("click",function(t){e.openSidebar()}),this.el.on("click","> button",function(t){e.closeSidebar()}),this.shadow.on("click",function(t){e.closeSidebar()})}},{key:"openSidebar",value:function(){this.el.addClass("active"),this.shadow.addClass("active")}},{key:"closeSidebar",value:function(){this.el.removeClass("active"),this.shadow.removeClass("active")}},{key:"renderComponents",value:function(e,t,n,o){var r=this,a={};return Object.keys(n).forEach(function(i){var s=new n[i](t,o),c=ie()('\n        <li class="nav-item">\n          <a class="nav-link '.concat(r.state.active===s.id?"active":"",'"\n            data-toggle="pill"\n            href="#').concat(s.id,'"\n            role="tab"\n            aria-controls="').concat(s.id,'">\n            ').concat(s.icon?'<i class="'.concat(s.icon,'"></i>'):"",'\n            <span class="').concat(s.btnTextVisible?"":"d-none d-sm-inline-block",'">').concat(te(i),"</span>\n          </a>\n        </li>\n      "));s.set("tab",c),e.append(c),a[i]=s}),a}}])&&Ot(n.prototype,o),r&&Ot(n,r),t}();n(141);function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _t(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_t(this,Lt(t).call(this,e))).id="tab-loader",n.icon="fa fa-cloud-download-alt",n.el=ie()('\n      <div\n        class="tab-pane fade show active"\n        id="'.concat(n.id,'"\n        role="tabpanel">\n      </div>\n    ')),n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.el.html('\n      <ul class="list-group mb-3">\n        <li class="list-group-item">\n          <span class="badge badge-pill badge-secondary">1</span>\n          '.concat(te("Go to"),'\n          <a href="').concat(D.authUrl,'" target="geopeitus">geopeitus.ee</a>\n          ').concat(te("and log in"),',\n        </li>\n        <li class="list-group-item">\n          <span class="badge badge-pill badge-secondary">2</span>\n          ').concat(te("download GPX from"),'\n          <a href="').concat(D.downloadUrl.page,'" target="geopeitus">').concat(te("here"),"</a>\n          ").concat(te("and drop it on map or import file from layers menu"),'\n          <div class="alert alert-light" role="alert">\n            ').concat(te("Quick links"),"<br/>\n            ").concat(Object.keys(D.downloadUrl.gpx).map(function(e){return'<a href="'.concat(D.downloadUrl.gpx[e],'" target="geopeitus">').concat(te(e),"</a>")}).join("<br/>"),'\n          </div>\n        </li>\n        <li class="list-group-item">\n          <span class="badge badge-pill badge-secondary">3</span>\n          ').concat(te("or open"),'\n          <a href="').concat(D.downloadUrl.geojson,'" target="geopeitus">link</a>\n          ').concat(te("and copy page content to textbox below"),'\n        </li>\n      </ul>\n      <div class="mb-3">\n        <textarea class="form-control" rows="6"></textarea>\n      </div>\n      <button disabled\n        type="button"\n        class="btn btn-secondary confirm">\n        ').concat(te("Add geocaches to map"),"\n      </button>\n    ")),this.el.find("textarea").on("input",function(t){var n=e.el.find("textarea").val().trim();e.el.find("button.confirm").prop("disabled",0===n.length)}),this.el.find("textarea").on("keyup",function(t){if(13===t.keyCode){var n=e.el.find("textarea");e.addCaches(n.val().trim()),n.val("").trigger("input")}}),this.el.on("click","button.confirm",function(t){var n=e.el.find("textarea");e.addCaches(n.val().trim()),n.val("").trigger("input")})}},{key:"addCaches",value:function(e){var t=null;e=this.fixme(e);var n=J("app/debug");try{if("FeatureCollection"!==(t=JSON.parse(e)).type||!t.features)throw new Error("Not valid GeoJSON")}catch(e){re("error",te(e.message)),n&&console.debug("GeocacheLoader.addCaches: error "+JSON.stringify(e))}if(t){var o=this.createLayer(t);J("map/layer/layers").push(o),re("success","".concat(te("Added")," ").concat(t.features.length," ").concat(te("features"))),n&&console.debug("GeocacheLoader.addCaches: added "+t.features.length)}}},{key:"fixme",value:function(e){return e.replace('"NAVY"',"NAVY")}},{key:"createLayer",value:function(e){return e.features&&e.features.forEach(function(e){e.id=A()}),ut({type:"FeatureCollection",id:A(),title:"Geocaches",features:e.features,style:{stroke:{color:"#000000",width:2},fill:{color:O("#000000",.5)},circle:{stroke:{color:"#000000"},fill:{color:O("#000000",.3)},radius:5}}})}}])&&Pt(n.prototype,o),r&&Pt(n,r),t}();n(363),n(365);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Mt(this,Nt(t).call(this,e))).id="tab-filter",o.icon="fa fa-filter",o.btnTextVisible=!0,o.el=ie()('\n      <div\n        class="tab-pane fade"\n        id="'.concat(o.id,'"\n        role="tabpanel">\n      </div>\n    ')),o.state={tab:null,conf:o.createConf(),layers:n.collection,filter:{}},o.create(),o.state.layers.on("add",function(e){return o.render()}),o.state.layers.on("remove",function(e){return o.render()}),o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.state.filter=this.buildPropertyList(this.state.layers),this.el.html('\n      <ul class="list-group mb-3">\n      '.concat(Object.keys(this.state.filter).length?this.renderFilter(this.state.filter):'<li class="list-group-item">\n          <i class="fas fa-plus"></i>\n          '.concat(te("Add caches to map"),"\n        </li>"),"\n      </ul>\n    ")),this.el.find("input[data-filter]").on("change",function(t){t.stopPropagation(),e.filter()}),this.el.find("input[name=radiusStyle]").on("change",function(t){t.stopPropagation();var n=ie()(t.target).is(":checked");e.state.layers.forEach(function(e){e.getSource().forEachFeature(function(e){e.set("radiusVisible",n)})}),e.filter()})}},{key:"renderFilter",value:function(e){return'\n      <li class="list-group-item">\n        <label>\n          <input type="checkbox" name="radiusStyle" value="0"> '.concat(te("Show 160m radius"),"\n        </label>\n      </li>\n      ").concat(Object.keys(e).map(function(t){return'<li class="list-group-item">'+Object.keys(e[t]).map(function(n){return'<label>\n            <input type="checkbox" name="'.concat(t,'" data-filter="').concat(t,'" value="').concat(n,'">\n            ').concat(te(e[t][n]),"\n          </label>")}).join("")+"</li>"}).join(""))}},{key:"createConf",value:function(){var e={};return Object.keys(D.filter).forEach(function(t){"string"==typeof D.filter[t]?e[t]=Object.values(D.mapping[D.filter[t]]):e[t]=D.filter[t]}),e}},{key:"buildPropertyList",value:function(e){var t=this,n={};return e.getArray().forEach(function(e){e.getSource().forEachFeature(function(e){var o=e.getProperties();Object.keys(o).forEach(function(e){e in t.state.conf&&(n[e]||(n[e]={}),t.state.conf[e].indexOf(o[e])>-1&&!n[e][o[e]]&&(n[e][o[e]]=o[e]))})})}),Object.keys(n).forEach(function(e){0===Object.keys(n[e]).length&&delete n[e]}),n}},{key:"filter",value:function(){var e=this.getChecked();this.state.layers.forEach(function(t){t.getSource().forEachFeature(function(t){if(e.count){var n=t.getProperties(),o=Object.keys(e.query).filter(function(t){return t in n&&e.query[t].indexOf(n[t])>-1});t.set("hidden",o.length!==Object.keys(e.query).length)}else t.set("hidden",!1)})}),Y("geocache/filter",e)}},{key:"getChecked",value:function(){for(var e=this.el.find("input[data-filter]").serializeArray(),t={query:{},count:0},n=0,o=e.length;n<o;n++)t.query[e[n].name]||(t.query[e[n].name]=[]),-1===t.query[e[n].name].indexOf(e[n].value)&&(t.query[e[n].name].push(e[n].value),t.count++);return t}}])&&Gt(n.prototype,o),r&&Gt(n,r),t}(),It=n(42),Wt=n(282),Bt=n.n(Wt),Vt=n(44),qt=n(65),Ht=n(45),zt=n(288);n(366);function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt=function(e){function t(e,n){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Zt(this,Xt(t).call(this,e))).id="tab-geotrip",o.icon="fa fa-thumbtack",o.btnTextVisible=!0,o.el=ie()('\n      <div\n        class="tab-pane fade"\n        id="'.concat(o.id,'"\n        role="tabpanel">\n      </div>\n    ')),o.state={tab:null,routeLayer:null,layers:J("map/layer/layers"),collection:new It.a},Y("geocache/trip",o.state.collection),J("map/layer/layers").on("remove",function(e){o.loadState()}),J("map/layer/overlays").on("remove",function(e){o.loadState()}),o.state.collection.on("add",function(e){e.element.getGeometry()instanceof Vt.a?(e.element.set("_inGeotrip",!0),o.render()):o.state.collection.remove(e.element)}),o.state.collection.on("remove",function(e){e.element.set("_inGeotrip",!1),o.render()}),o.create(),o.initEvents(),J("map"))?o.loadState():J("map/que").push(function(e){o.loadState()});return o}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;if(this.el.html('\n      <ul class="list-group mb-3">\n      '.concat(this.state.collection.getLength()?this.renderTrip(this.state.collection):'<li class="list-group-item">\n          <i class="fas fa-plus"></i>\n          '.concat(te("Add features from map"),"\n        </li>"),"\n      </ul>\n      ").concat(this.state.collection.getLength()?'<div class="btn-group float-right" role="group">\n          <a role="button" class="btn btn-secondary export" title="'.concat(te("Download"),'">\n            <i class="fas fa-download"></i> GPX\n          </a>\n          <button type="button" class="btn btn-secondary clear" title="').concat(te("Clear trip"),'">\n            <i class="fas fa-trash"></i>\n          </button>\n        </div>'):"","\n    ")),this.state.tab&&this.state.tab.find("span").html(this.state.collection.getLength()||te("Geotrip")),this.state.collection.getLength()){this.state.routeLayer||(this.state.routeLayer=this.createLayer(),this.state.routeLayer.setMap(J("map"))),this.state.routeLayer.getSource().clear();var t=this.state.collection.getArray().map(function(e){return e.getGeometry().getCoordinates()}),n=[];if(t.length>1){for(var o=0,r=t.length;o<r;o++)o!==r-1?n[o]=[t[o],t[o+1]]:n[o-1][1]=t[o];n.forEach(function(t){e.state.routeLayer.getSource().addFeature(new Ht.a(new qt.a(t)))})}Bt.a.create(this.el.find("ul")[0],{draggable:"li.sort-item",handle:".badge",onUpdate:function(t){e.reorderTrip(),e.render()}}),Y("geocache/trip/ids",this.state.collection.getArray().map(function(e){return e.getId()}),!0)}}},{key:"renderTrip",value:function(e){return e.getArray().map(function(e,t){return'\n        <li class="list-group-item sort-item" data-id="'.concat(e.getId(),'">\n          <button type="button" class="close" aria-label="').concat(te("Close"),'">\n            <i class="fa fa-times"></i>\n          </button>\n          <span class="badge badge-pill badge-primary">').concat(t+1,'</span>\n          <a href="#">').concat(te(e.get("name")),"</a>\n        </li>")}).join("")}},{key:"initEvents",value:function(){var e=this;this.el.on("click","li button.close",function(t){e.remove(ie()(t.currentTarget).closest("li").data("id"))}),this.el.on("click","li a",function(t){t.preventDefault(),e.zoomTo(ie()(t.currentTarget).closest("li").data("id"))}),this.el.on("click","button.clear",function(t){e.clearTrip()}),this.el.on("click","a.export",function(t){t.preventDefault(),e.export()}),this.el.on("click","button.share",function(t){e.share()})}},{key:"reorderCollection",value:function(e,t){for(var n=function(n,o){var r=e.getArray().filter(function(e){return e.getId()===t[n]});r&&r[0]&&(e.remove(r[0]),e.insertAt(n,r[0]))},o=0,r=t.length;o<r;o++)n(o)}},{key:"reorderTrip",value:function(){var e=[];this.el.find("li.sort-item").each(function(t,n){e.push(ie()(n).data("id"))}),this.reorderCollection(this.state.collection,e)}},{key:"loadState",value:function(){var e=J("geocache/trip/ids");this.clearTrip(),e&&(this.getTripFeaturesFromGroup(J("map/layer/layers"),e,this.state.collection),this.getTripFeaturesFromGroup(J("map/layer/overlays"),e,this.state.collection),this.reorderCollection(this.state.collection,e))}},{key:"getTripFeaturesFromGroup",value:function(e,t,n){e.getArray().filter(function(e){return e.get("conf")&&"FeatureCollection"===e.get("conf").type}).forEach(function(e){e.getSource().forEachFeature(function(e){t.indexOf(e.getId())>-1&&n.push(e)})})}},{key:"clearTrip",value:function(){this.state.routeLayer&&this.state.routeLayer.getSource().clear(),this.state.collection.clear()}},{key:"remove",value:function(e){var t=this.state.collection.getArray().filter(function(t){return t.getId()===e});t&&t[0]&&this.state.collection.remove(t[0])}},{key:"zoomTo",value:function(e){var t=this.state.collection.getArray().filter(function(t){return t.getId()===e});t&&t[0]&&J("map").getView().animate({center:t[0].getGeometry().getCoordinates(),zoom:15,duration:500})}},{key:"export",value:function(){var e=this.state.collection.getArray().map(function(e){var t=e.clone();return t.getGeometry().transform(J("map/projection"),"EPSG:4326"),t});if(e.length>1){var t=[];this.state.routeLayer.getSource().getFeatures().forEach(function(e){var n=e.clone();t=t.concat(n.getGeometry().getCoordinates())}),e.push(new Ht.a(new qt.a(t).transform(J("map/projection"),"EPSG:4326")))}y(D.exportFileName,e)}},{key:"createLayer",value:function(){var e=J("map").getView(),t=J("map/projection");return ut({type:"FeatureCollection",title:"Route",updateWhileAnimating:!0,updateWhileInteracting:!0,style:function(n,o,r){var a=n.getGeometry(),i=6*e.getResolution()/1e3,c=Object(s.c)(a)/1e3,l=a.clone().transform(t,"EPSG:4326");if(c-2*i>i){var u=Object(zt.a)({type:"LineString",coordinates:l.getCoordinates()},i,c-1.5*i);l.setCoordinates(u.geometry.coordinates),l.transform("EPSG:4326",t);var f=l.getCoordinates(),p=f[f.length-1][0]-f[f.length-2][0],d=f[f.length-1][1]-f[f.length-2][1],h=Math.atan2(d,p);return[r({stroke:{color:"white",width:5},geometry:l}),r({stroke:{color:"rgba(0, 0, 0, 0.6)",width:3},geometry:l}),r({shape:{fill:{color:"rgba(0, 0, 0, 0.6)"},stroke:{color:"white",width:1},points:3,radius:8,rotateWithView:!0,rotation:-h,angle:33},geometry:new Vt.a(l.getLastCoordinate())})]}return null}})}}])&&Jt(n.prototype,o),r&&Jt(n,r),t}(),$t=n(192),en={test:function(e){return e.get("fstatus")&&void 0!==e.get("type")&&e.get("date_hidden")},formatFeatures:function(e){var t=new Date;e.features.forEach(function(n){n.set("type",e.mapping.type[n.get("type")]||n.get("type")),n.set("isCache","Geocache"===n.get("type").substring(0,8)),n.set("fstatus",e.mapping.fstatusJSON[n.get("fstatus")]||n.get("fstatus")),n.set("status","Available"),n.set("time",n.get("date_hidden")),n.unset("date_hidden"),n.set("url",e.url+n.get("id")),n.set("owner",n.get("user_id")),n.unset("user_id"),n.set("container",e.mapping.container[n.get("size")]||n.get("size")),n.unset("size");var o=new Date(n.get("date_hidden")),r=new Date(o.getFullYear(),o.getMonth(),o.getDate()+e.newCacheDays),a="Not Found"===n.get("fstatus")&&r>t?"New Cache":null;n.get("newCache")||n.set("newCache",a),n.getId()||n.setId(e.uid())})}},tn={test:function(e){return e.get("wpt")&&e.get("wpt")["groundspeak:cache"]},formatFeatures:function(e){var t=new Date;e.features.forEach(function(n){var o=n.get("wpt");if(n.unset("wpt"),n.unset("extensionsNode_"),o["groundspeak:cache"]){var r={};Object.keys(o["groundspeak:cache"]).forEach(function(e){"_text"!==e&&(r[e.replace("groundspeak:","")]=o["groundspeak:cache"][e]._text?o["groundspeak:cache"][e]._text:o["groundspeak:cache"][e])}),n.set("id",r["@id"]),n.set("isCache","Geocache"===n.get("type").substring(0,8));var a=n.get("sym");e.user&&e.user===r.owner&&(a="Geocache Owner"),n.set("fstatus",e.mapping.fstatusGPX[a]||a),n.unset("sym");var i="True"===r["@available"]?"Available":"Unavailable";"True"===r["@archived"]&&(i="Archived"),n.set("status",i),n.set("time",o.time._text),n.set("name",r.name),n.set("url",o.url._text),n.set("owner",r.owner),n.set("container",r.container),n.set("difficulty",r.difficulty),n.set("terrain",r.terrain);var s=new Date(n.get("time")),c=new Date(s.getFullYear(),s.getMonth(),s.getDate()+e.newCacheDays),l="Not Found"===n.get("fstatus")&&c>t?"New Cache":null;n.set("newCache",l)}else n.set("name",n.get("type")),n.set("url",o.url._text);n.getId()||n.setId(e.uid())})}};n(367);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rn(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rn(this,an(t).call(this,e))).el=ie()('\n      <div id="geocache" class="btn-group">\n        <button\n          class="btn btn-secondary"\n          title="'.concat(te("Caches"),'">\n          <i class="fa fa-cube"></i>\n          <span>').concat(te("Caches"),"</span>\n        </button>\n      </div>\n    ")),n.state={layers:new It.a,styleCache:{},styleConfig:D.styles,currentUser:J("app/account")};var o=function(e){var t=0;n.state.layers.forEach(function(e){t+=e.getSource().getFeatures().filter(function(e){return e.get("isCache")&&!e.get("hidden")}).length}),n.el.find("button > span").html(t||te("Caches")),n.sidebar.getComponent("Filter").get("tab").find("span").html(t||te("Filter"))};return n.state.layers.on("add",o),n.state.layers.on("remove",o),Z("geocache/filter",o),n.state.styleConfig.radiusStyle.geometry=function(e){var t=e.getGeometry().getCoordinates(),n=v(Object(Ne.l)(t));return new $t.a(t,D.radiusStyle.radius*n)},n.create(),n.sidebar=new Ct({target:ie()("#geop"),trigger:n.el.find("button"),position:"left",components:{GeocacheLoader:Rt,Filter:Dt,Geotrip:Qt},activeComponent:"tab-loader",shadow:!1,props:{collection:n.state.layers}}),n.layersPick(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,Q),n=t,(o=[{key:"layersPick",value:function(){var e=this,t=J("map/layer/layers");t.forEach(function(t){e.checkLayer(t)&&e.registerLayer(t)}),t.on("add",function(t){e.checkLayer(t.element)&&e.registerLayer(t.element)}),t.on("remove",function(t){e.state.layers.remove(t.element)})}},{key:"checkLayer",value:function(e){var t=!!e.getSource().getFeatures&&e.getSource().getFeatures();if(t&&t[0]){var n=en.test(t[0]),o=tn.test(t[0]);return o?e.set("_cacheFormatParser",tn):n&&e.set("_cacheFormatParser",en),n||o}return!1}},{key:"registerLayer",value:function(e){var t=this,n={"Not Found":"far fa-square",Found:"far fa-check-square",Owner:"fas fa-user"};e.get("_cacheFormatParser").formatFeatures({features:e.getSource().getFeatures(),newCacheDays:D.newCacheDays,mapping:D.mapping,user:this.state.currentUser,uid:A,url:D.cacheUrl,date:E}),e.setStyle(function(e,n){return t.styleGeocache(e,n)}),e.set("_featureInfo",{title:function(e){var n=J("geocache/trip"),o=n&&n.getArray().indexOf(e)>-1,r=t.state.styleConfig.text[e.get("type")];return e.get("isCache")?'\n            <i class="'.concat(r?r.class:t.state.styleConfig.base.class," ").concat("Available"!==e.get("status")?"unavailable":"",'"></i>\n            <a href="').concat(e.get("url"),'" target="_blank" class="').concat("Archived"===e.get("status")?"archived":"",'">').concat(te(e.get("name")),'</a>\n            <a href="#" class="tools cache-toggle float-right" data-id="').concat(e.getId(),'" title="').concat(te("Add to geotrip"),'">\n              <i class="fas ').concat(o?"fa-minus-square":"fa-thumbtack",'"></i>\n            </a>'):'\n            <i class="'.concat(r?r.class:t.state.styleConfig.base.class,'"></i>\n            <a href="').concat(e.get("url"),'" target="_blank">').concat(te(e.get("name")),'</a>\n            <a href="#" class="cache-toggle" data-id="').concat(e.getId(),'" title="').concat(te("Add to geotrip"),'">\n              <i class="fas ').concat(o?"fa-minus-square":"fa-thumbtack",'"></i>\n            </a>')},content:function(e){var o=t.state.styleConfig.text[e.get("type")];return e.get("isCache")?'\n            <p class="text-muted metadata">\n              <i class="fas fa-clock"></i> '.concat(E(e.get("time")),'<br/>\n              <i class="fa fa-user"></i> ').concat(e.get("owner"),'<br/>\n              <i class="').concat(o?o.class:t.state.styleConfig.base.class,'"></i>\n              ').concat(te(e.get("type")),'<br/>\n              <i class="fa fa-chart-area"></i> ').concat(e.get("terrain"),'\n              <i class="fa fa-star ml-2"></i> ').concat(e.get("difficulty"),'\n              <i class="fa fa-expand-arrows-alt ml-2"></i> ').concat(te(e.get("container")),"<br/>\n              ").concat(e.get("cmt")?'<i class="fa fa-hand-point-right"></i> '.concat(e.get("cmt")):"",'\n            </p>\n            <p>\n              <i class="').concat(n[e.get("fstatus")],'"></i> ').concat(te(e.get("fstatus")),"\n            </p>"):"\n            <p>\n              ".concat(e.get("desc"),"\n            </p>")}}),this.state.layers.push(e),Y("geocache/loadend",this.state.layers.getLength()),J("app/debug")&&console.debug("Geocache.registerLayer: "+e.get("id")+", "+e.get("title"))}},{key:"styleGeocache",value:function(e,t){var n=e.get("type"),o=e.get("fstatus"),r=e.get("newCache"),a=e.get("status"),i=t>D.overviewMinResolution,s=n+o+r+a+i;if(!e.get("_inGeotrip")&&!e.get("isCache")&&t>D.waypointMaxResolution)return null;if(!e.get("_inGeotrip")&&e.get("hidden"))return null;if(!this.state.styleCache[s]){var c=C(i?Object.assign({},this.state.styleConfig.base,this.state.styleConfig.overview,this.state.styleConfig.color[o],this.state.styleConfig.newCache[r]||{}):Object.assign({},this.state.styleConfig.base,this.state.styleConfig.text[n],this.state.styleConfig.color[o],this.state.styleConfig.newCache[r]||{}));"Available"!==a&&(c.fill&&(c.fill.color=O(c.fill.color,.5)),c.stroke&&(c.stroke.color=O(c.stroke.color,.7))),this.state.styleCache[s]=Je({text:c,zIndex:e.get("isCache")?2:1})}return e.get("isCache")&&e.get("radiusVisible")&&t<=D.radiusStyle.maxResolution?(this.state.styleCache.radiusStyle||(this.state.styleCache.radiusStyle=Je(this.state.styleConfig.radiusStyle)),[this.state.styleCache[s],this.state.styleCache.radiusStyle]):[this.state.styleCache[s]]}}])&&on(n.prototype,o),r&&on(n,r),t}();n(368);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fn(this,pn(t).call(this,e))).el=ie()('\n      <a href="#" id="osm-edit" title="'.concat(te("Edit OSM here"),'">\n        <i class="fa fa-edit"></i>\n      </a>\n    ')),n.isRow=!1,n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){this.el.on("click",function(e){e.preventDefault();var t=Object(Ne.l)(J("map/view/center")),n=J("map/view/zoom");window.open(U.ideditor+n+"/"+t[1]+"/"+t[0])})}}])&&un(n.prototype,o),r&&un(n,r),t}();function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bn(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e,t,n){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vn(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bn(this,vn(t).call(this,e))).el=ie()("<li />"),n.modal=ie()("#modal_wmslayer"),n.isRow=!0,n.layer_conf={type:"TileWMS",url:null,projection:"EPSG:3301",gutter:20,crossOrigin:null},n.layer_conf_params={LAYERS:null,TILED:!0,FORMAT:"image/png",VERSION:"1.1.1"},n.state={layers:J("map/layer/layers")},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.modal&&0!==this.modal.length||(this.modal=ie()('\n        <div class="modal fade"\n          id="modal_wmslayer"\n          tabindex="-1"\n          role="dialog"\n          aria-hidden="true">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <h4 class="modal-title">'.concat(te("Add WMS layer"),'</h4>\n                <button type="button"\n                  class="close"\n                  data-dismiss="modal"\n                  aria-label="Close">\n                  <span aria-hidden="true">&times;</span>\n                </button>\n              </div>\n              <div class="modal-body text-muted">\n                ').concat(te("Insert WMS v.1.1.1 URL with LAYERS and SRS parameters"),'\n                <textarea class="form-control" rows="3"></textarea>\n                <div class="small examples">\n                  <b>Näited:</b><br>\n                  <a href="http://kaart.maaamet.ee/wms/alus?layers=TOPOYKSUS_6569,TOPOYKSUS_7793&SRS=EPSG:3301&title=Kataster">\n                    katastrikaart\n                  </a>\n                </div>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-secondary confirm">').concat(te("Add"),"</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      ")),this.modal.on("click","button.confirm",function(t){t.preventDefault();var n=e.createLayer(e.modal.find("textarea").val().trim());n&&(e.state.layers.push(n),e.modal.find("textarea").val(""),e.modal.modal("hide"))}),this.modal.on("click",".examples a",function(t){t.preventDefault(),e.modal.find("textarea").val(t.target.href)}),ie()("body").append(this.modal)),this.el.html('\n      <a href="#"\n        id="add-wms-layer"\n        class="dropdown-item"\n        data-toggle="modal"\n        data-target="#modal_wmslayer">\n        <i class="fa fa-plus"></i>\n        '.concat(te("Add WMS layer"),"\n      </a>\n    "))}},{key:"createLayer",value:function(e){var t,n,o=J("app/debug"),r=k(e);if(null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/g)&&r.query){var a=Object.assign({},this.layer_conf);return a.params=Object.assign({},this.layer_conf_params),r.query.LAYERS||r.query.layers?(a.params.LAYERS=r.query.LAYERS||r.query.layers,delete r.query.LAYERS,delete r.query.layers,r.query.SRS||r.query.srs?(a.projection=r.query.srs||r.query.SRS,delete r.query.SRS,delete r.query.srs,a.url=(t=r,n=Object.keys(t.query).map(function(e){return e+"="+t.query[e]}).join("&"),t.protocol+"//"+t.host+t.pathname+"?"+n),a.id=A(),a.title=r.query.title||a.params.LAYERS,ut(a)):(re("error",te("Missing SRS parameter")),void(o&&console.error("WMSLayer.createLayer: Missing SRS parameter - ".concat(e))))):(re("error",te("Missing LAYERS parameter")),void(o&&console.error("WMSLayer.createLayer: Missing LAYERS parameter - ".concat(e))))}return re("error",te("URL is not valid WMS resource!")),o&&console.error("WMSLayer.createLayer: URL is not valid WMS resource! - ".concat(e)),null}},{key:"destroy",value:function(){this.modal.modal("dispose"),this.modal.remove(),this.modal=null,gn(vn(t.prototype),"destroy",this).call(this)}}])&&mn(n.prototype,o),r&&mn(n,r),t}(),An=n(111),On=n(50),Sn=n(18),jn=n(11),En=n(0),Cn=n(3);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _n(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1","http://www.groundspeak.com/cache/1/0"],Fn=Object(En.o)(Rn,{text:Object(En.k)(Cn.e,"linkText"),type:Object(En.k)(Cn.e,"linkType")}),Gn=Object(En.o)(Rn,{rte:Object(En.h)(function(e,t){var n=t[0],o=Object(En.r)({flatCoordinates:[],layoutOptions:{}},Nn,e,t);if(!o)return;var r=o.flatCoordinates;delete o.flatCoordinates;var a=o.layoutOptions;delete o.layoutOptions;var i=zn(a,r),s=new qt.a(r,i);Object(On.b)(s,!1,n);var c=new Ht.a(s);return c.setProperties(o),c}),trk:Object(En.h)(function(e,t){var n=t[0],o=Object(En.r)({flatCoordinates:[],ends:[],layoutOptions:{}},Un,e,t);if(!o)return;var r=o.flatCoordinates;delete o.flatCoordinates;var a=o.ends;delete o.ends;var i=o.layoutOptions;delete o.layoutOptions;var s=zn(i,r,a),c=new An.a(r,s,a);Object(On.b)(c,!1,n);var l=new Ht.a(c);return l.setProperties(o),l}),wpt:Object(En.h)(function(e,t){var n=t[0],o=Object(En.r)({},Mn,e,t);if(!o)return;var r={},a=Hn([],r,e,o),i=zn(r,a),s=new Vt.a(a,i);Object(On.b)(s,!1,n);var c=new Ht.a(s);return c.setProperties(o),c.set("wpt",function e(t){var n={};if(1===t.nodeType)for(var o=0,r=t.attributes.length;o<r;o++){var a=t.attributes.item(o);n["@"+a.nodeName]=a.nodeValue}else if(3===t.nodeType)return t.nodeValue.trim();if(t.hasChildNodes())for(var i,s=0,c=t.childNodes.length;s<c;s++){var l=t.childNodes.item(s),u=l.nodeName.replace("#","_");if(void 0===n[u])("string"!=typeof(i=e(l))||i.length)&&(n[u]=i);else{if(void 0===n[u].push){var f=n[u];n[u]=[],("string"!=typeof f||f.length)&&n[u].push(f)}("string"!=typeof(i=e(l))||i.length)&&n[u].push(i)}}return n}(e)),c})}),Mn=Object(En.o)(Rn,{ele:Object(En.k)(Cn.c),time:Object(En.k)(Cn.b),magvar:Object(En.k)(Cn.c),geoidheight:Object(En.k)(Cn.c),name:Object(En.k)(Cn.e),cmt:Object(En.k)(Cn.e),desc:Object(En.k)(Cn.e),src:Object(En.k)(Cn.e),link:Vn,sym:Object(En.k)(Cn.e),type:Object(En.k)(Cn.e),fix:Object(En.k)(Cn.e),sat:Object(En.k)(Cn.d),hdop:Object(En.k)(Cn.c),vdop:Object(En.k)(Cn.c),pdop:Object(En.k)(Cn.c),ageofdgpsdata:Object(En.k)(Cn.c),dgpsid:Object(En.k)(Cn.d),extensions:qn}),Nn=Object(En.o)(Rn,{name:Object(En.k)(Cn.e),cmt:Object(En.k)(Cn.e),desc:Object(En.k)(Cn.e),src:Object(En.k)(Cn.e),link:Vn,number:Object(En.k)(Cn.d),extensions:qn,type:Object(En.k)(Cn.e),rtept:function(e,t){var n=Object(En.r)({},Dn,e,t);if(n){var o=t[t.length-1],r=o.flatCoordinates,a=o.layoutOptions;Hn(r,a,e,n)}}}),Un=Object(En.o)(Rn,{name:Object(En.k)(Cn.e),cmt:Object(En.k)(Cn.e),desc:Object(En.k)(Cn.e),src:Object(En.k)(Cn.e),link:Vn,number:Object(En.k)(Cn.d),type:Object(En.k)(Cn.e),extensions:qn,trkseg:function(e,t){var n=t[t.length-1];Object(En.q)(In,e,t);var o=n.flatCoordinates;n.ends.push(o.length)}}),Dn=Object(En.o)(Rn,{ele:Object(En.k)(Cn.c),time:Object(En.k)(Cn.b)}),In=Object(En.o)(Rn,{trkpt:function(e,t){var n=Object(En.r)({},Wn,e,t);if(n){var o=t[t.length-1],r=o.flatCoordinates,a=o.layoutOptions;Hn(r,a,e,n)}}}),Wn=Object(En.o)(Rn,{ele:Object(En.k)(Cn.c),time:Object(En.k)(Cn.b)}),Bn=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_n(this,Ln(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,c["a"]),n=t,(o=[{key:"readFeaturesFromNode",value:function(e,t){if(!Object(jn.d)(Rn,e.namespaceURI))return[];if("gpx"===e.localName){var n=Object(En.r)([],Gn,e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}}])&&Pn(n.prototype,o),r&&Pn(n,r),t}();function Vn(e,t){var n=t[t.length-1],o=e.getAttribute("href");null!==o&&(n.link=o),Object(En.q)(Fn,e,t)}function qn(e,t){t[t.length-1].extensionsNode_=e}function Hn(e,t,n,o){return e.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in o?(e.push(o.ele),delete o.ele,t.hasZ=!0):e.push(0),"time"in o?(e.push(o.time),delete o.time,t.hasM=!0):e.push(0),e}function zn(e,t,n){var o=Sn.a.XY,r=2;if(e.hasZ&&e.hasM?(o=Sn.a.XYZM,r=4):e.hasZ?(o=Sn.a.XYZ,r=3):e.hasM&&(o=Sn.a.XYM,r=3),4!==r){for(var a=0,i=t.length/4;a<i;a++)t[a*r]=t[4*a],t[a*r+1]=t[4*a+1],e.hasZ&&(t[a*r+2]=t[4*a+2]),e.hasM&&(t[a*r+2]=t[4*a+3]);if(t.length=t.length/4*r,n)for(var s=0,c=n.length;s<c;s++)n[s]=n[s]/4*r}return o}var Yn=n(246),Jn=n(163);function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kn(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Kn(this,Qn(t).call(this,e)),window.File&&window.FileReader&&window.FileList&&window.Blob?(n.el=ie()("<li />"),n.isRow=!0,n.fileTypes={gpx:new Bn,geojson:new Me.a,kml:new Yn.a},n.fileTypes.json=n.fileTypes.geojson,n.state={layers:J("map/layer/layers")},n.addDragNDrop(),n):Kn(n)}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this,t=J("app/debug");this.el.html('\n      <a href="#"\n        id="add-file-layer"\n        class="dropdown-item">\n        <i class="fa fa-plus"></i>\n        '.concat(te("Add File layer"),'\n      </a>\n      <input type="file" style="display:none;" />\n    ')),this.el.on("click","a#add-file-layer",function(e){e.preventDefault(),e.stopPropagation(),ie()(e.target).closest("li").find("input").trigger("click")}),this.el.on("change","input",function(n){var o=n.target.files;if(o&&o[0]){var r=o[0].name,a=r.split(".").pop().toLowerCase();if(a in e.fileTypes){t&&console.debug("FileLayer.render input change: ".concat(r));var i=new window.FileReader;i.onload=function(n){var o=e.fileTypes[a].readFeatures(n.target.result),i=e.fileTypes.geojson.writeFeaturesObject(o);i.title=r;var s=e.createLayer(i);s&&(e.state.layers.push(s),re("success","".concat(te("Added")," ").concat(i.features.length," ").concat(te("features"))),t&&console.debug("FileLayer.render layer created: ".concat(r,", features: ").concat(i.features.length)))},i.readAsText(o[0])}else re("error",te("Unsupported file type")),t&&console.error("FileLayer.render Unsupported file type: ".concat(r))}})}},{key:"addDragNDrop",value:function(){var e=this,t=J("map"),n=!1;t&&t.getInteractions().forEach(function(e){e instanceof Jn.a&&(n=!0)});if(!n){var o=new Jn.a({projection:ot,formatConstructors:[Bn,Me.a,Yn.a]});if(o.on("addfeatures",function(t){var n=e.fileTypes.geojson.writeFeaturesObject(t.features);n.title=t.file.name;var o=e.createLayer(n);o&&(e.state.layers.push(o),re("success","".concat(te("Added")," ").concat(n.features.length," ").concat(te("features"))),J("app/debug")&&console.debug("FileLayer.addDragNDrop layer created: ".concat(t.file.name,", features: ").concat(n.features.length)))}),t)t.addInteraction(o);else J("map/que").push(function(e){e.addInteraction(o)})}}},{key:"createLayer",value:function(e){if(e.features.length>0){var t=function(e){return i()(e)}({luminosity:"dark"});e.id=A(),e.features&&e.features.forEach(function(e){e.id=A()}),e.style={stroke:{color:t,width:2},fill:{color:O(t,.5)},circle:{stroke:{color:t},fill:{color:O(t,.3)}}};try{return ut(e)}catch(t){re("error",te("Error creating layer")+t),J("app/debug")&&console.debug("FileLayer.addDragNDrop layer created: ".concat(t.file.name,", features: ").concat(e.features.length))}}else re("error",te("Empty file")),J("app/debug")&&console.debug("FileLayer.addDragNDrop empty file: ".concat(e.title))}}])&&Xn(n.prototype,o),r&&Xn(n,r),t}();function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oo(e,t){return!t||"object"!==to(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e,t){return(ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var io=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oo(this,ro(t).call(this,e))).format=new Me.a,n.state={layers:J("map/layer/layers")},n.init(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(t,Q),n=t,(o=[{key:"init",value:function(){var e,t=this,n=T("hash"),o=T("view");n&&(e=this.loadFeaturesFromUrl(n));var r=T("icon");if(r&&(e=this.addMarker(r)),!o&&e){var a=J("map");if(a)this.fitTo(a,e);else J("map/que").push(function(n){t.fitTo(n,e)})}}},{key:"fitTo",value:function(e,t){e.getView().fit(t,{padding:[100,100,100,100],maxZoom:14,duration:500})}},{key:"loadFeaturesFromUrl",value:function(e){R({hash:null});var t=ce.a.unpack(decodeURIComponent(e));if(t&&t.length){var n=t.map(function(e){return e.id});n&&n.length&&Y("geocache/trip/ids",n,!0);var o=t.filter(function(e){return void 0!==e.properties.fstatus}),r=t.filter(function(e){return void 0===e.properties.fstatus}),a=[];if(o.length){var i=this.createLayer("Geocaches",o);Object(Ue.q)(a,i.getSource().getExtent()),this.state.layers.push(i)}if(r.length){var s=this.createLayer("Features",r);Object(Ue.q)(a,s.getSource().getExtent()),this.state.layers.push(s)}return J("app/debug")&&console.error("UrlLayer.loadFeaturesFromUrl: caches ".concat(o.length,", features ").concat(r.length)),a}return null}},{key:"addMarker",value:function(e){var t=e.split("-");if(t&&2===t.length){var n={type:"Feature",id:A(),geometry:{type:"Point",coordinates:[Number(t[1]),Number(t[0])]},properties:{name:"Point"}},o=this.createLayer("Point",[n],{text:{text:"",class:"fas fa-map-marker-alt",font:'900 24px "Font Awesome 5 Free"',textBaseline:"bottom",fill:{color:"#000"},stroke:{color:"#fff",width:4}}}),r=J("map");if(r)o.setMap(r);else J("map/que").push(function(e){o.setMap(e)});return J("app/debug")&&console.error("UrlLayer.addMarker: ".concat(e)),o.getSource().getExtent()}return null}},{key:"createLayer",value:function(e,t,n){return ut({type:"FeatureCollection",id:A(),title:te(e),features:t,style:n})}}])&&no(n.prototype,o),r&&no(n,r),t}();n(369);function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lo(e,t){return!t||"object"!==so(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uo(e,t,n){return(uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fo(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ho=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lo(this,fo(t).call(this,e))).el=ie()('<div class="btn-group float-right" id="layermanager"></div>'),n.state={activeBaseLayer:null,baseLayers:J("map/layer/base"),layers:J("map/layer/layers"),overlays:J("map/layer/overlays"),open:!1},n.handlers={onchange:function(){n.render()}},n.state.baseLayers.forEach(function(e){e.get("id")===J("map/baseLayer")&&(n.state.activeBaseLayer=e)}),n.state.layers.on("add",n.handlers.onchange),n.state.layers.on("remove",n.handlers.onchange),n.state.overlays.on("add",n.handlers.onchange),n.state.overlays.on("remove",n.handlers.onchange),n.create(),n.components={osm:hn,wms:kn,file:eo},n.renderComponents(n.el.find(".dropdown-menu")),n.urlLayer=new io,F(function(e){if(e.view){var t=n.permalinkToViewConf(e.view);t&&n.changeBaseLayer(t)}}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){var e=this;uo(fo(t.prototype),"create",this).call(this),this.target&&this.el&&(this.el.on("click",".baselayer",function(t){t.preventDefault(),t.stopPropagation();var n=ie()(t.currentTarget).data("id");n===e.state.activeBaseLayer.get("id")?e.toggleLayer("baseLayers",n):e.changeBaseLayer(n)&&R({view:G({center:J("map/center"),zoom:J("map/zoom"),rotation:J("map/rotation"),baseLayer:n})})}),this.el.on("click",".layer",function(t){t.preventDefault(),t.stopPropagation(),e.toggleLayer(ie()(t.currentTarget).data("group"),ie()(t.currentTarget).data("id"))}),this.el.on("click",".layer a.fit-layer",function(t){t.preventDefault(),t.stopPropagation(),e.fitTo(ie()(t.currentTarget).closest(".layer").data("group"),ie()(t.currentTarget).closest(".layer").data("id"))}),this.el.on("click",".layer a.remove-layer",function(t){t.preventDefault(),t.stopPropagation(),e.removeLayer(ie()(t.currentTarget).closest(".layer").data("group"),ie()(t.currentTarget).closest(".layer").data("id"))}))}},{key:"render",value:function(){var e=this;this.el.html('\n      <button type="button"\n        class="btn btn-secondary toggle-btn dropdown-toggle no-caret"\n        data-toggle="dropdown"\n        aria-label="'.concat(te("Layers"),'"\n        aria-expanded="false">\n        <span class="display-name d-none d-sm-inline-block">\n          ').concat(this.state.activeBaseLayer?te(this.state.activeBaseLayer.get("title")):te("Layers"),'\n        </span>\n        <i class="fa fa-layer-group"></i>\n      </button>\n      <ul class="dropdown-menu dropdown-menu-right">\n        ').concat(this.state.baseLayers.getLength()>0?this.state.baseLayers.getArray().map(function(t){return'\n              <li\n                class="dropdown-item baselayer '.concat(e.layerVisible(t)?"":"disabled",'"\n                data-id="').concat(t.get("id"),'">\n                <i class="far ').concat(t.getVisible()?"fa-dot-circle":"fa-circle",'"></i>\n                ').concat(te(t.get("title")),"\n              </li>")}).join(""):'<li class="dropdown-item disabled">'.concat(te("No baselyers added"),"</li>"),"\n        ").concat(this.renderLayerGroup("overlays",this.state.overlays),"\n        ").concat(this.renderLayerGroup("layers",this.state.layers),"\n      </ul>")),this.renderComponents(this.el.find(".dropdown-menu")),this.state.open&&(this.el.find("button.toggle-btn").dropdown("toggle"),this.state.open=!1)}},{key:"renderLayerGroup",value:function(e,t){var n=this;return t.getLength()>0?'<li class="dropdown-divider"></li>'+t.getArray().map(function(t){return'\n          <li\n            class="dropdown-item layer '.concat(n.layerVisible(t)?"":"disabled",'"\n            data-group="').concat(e,'" data-id="').concat(t.get("id"),'">\n            <i class="far ').concat(t.getVisible()?"fa-check-square":"fa-square",'"></i>\n            ').concat(te(t.get("title")),'\n            <div class="layer-tools">\n              <a href="#" class="fit-layer">\n                <i class="fa fa-search-plus"></i>\n              </a>\n              <a href="#" class="remove-layer">\n                <i class="fa fa-times"></i>\n              </a>\n            </div>\n          </li>')}).join(""):""}},{key:"permalinkToViewConf",value:function(e){return(e?e.split("-"):[])[4]}},{key:"layerVisible",value:function(e){return!(e.minResolution&&this._map.getView().getResolution()<e.minResolution)&&!(e.maxResolution&&this._map.getView().getResolution()>e.maxResolution)}},{key:"changeBaseLayer",value:function(e){var t=this.state.baseLayers.getArray().filter(function(t){return t.get("id")===e});return 1===t.length&&(this.state.baseLayers.forEach(function(e){e.setVisible(!1)}),t[0].setVisible(!0),this.state.activeBaseLayer=t[0],Y("map/baseLayer",e,!0),this.render(),!0)}},{key:"toggleLayer",value:function(e,t){this.state[e].forEach(function(e){e.get("id")!==t||e.setVisible(!e.getVisible())}),this.state.open=!0,this.render()}},{key:"removeLayer",value:function(e,t){var n=this;this.state[e].forEach(function(o){if(o&&o.get("id")===t)return n.state.open=!0,void n.state[e].remove(o)})}},{key:"fitTo",value:function(e,t){var n=!0,o=!1,r=void 0;try{for(var a,i=this.state[e].getArray()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(s&&s.get("id")===t){this.state.open=!0;var c=s.getSource().getExtent?s.getSource().getExtent():s.getExtent();c?J("map").getView().fit(c,{padding:[50,50,50,50],maxZoom:17,duration:500}):(re("error","".concat(te("Unable to find layer extent"))),J("app/debug")&&console.error("LayerManager.fitTo: no bbox ".concat(e,", ").concat(t)));break}}}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}}},{key:"renderComponents",value:function(e){var t=this,n=!1;Object.keys(this.components).forEach(function(o){var r=new t.components[o](e);r&&r.isRow&&!n&&(e.append('<div class="dropdown-divider"></div>'),n=!0),r.create()})}}])&&co(n.prototype,o),r&&co(n,r),t}(),yo=(n(370),n(371),n(221),[{regexp:/^(34N)[ ,;:]\s*([0-9]{7}|[0-9]{1,7}[,.]\d{0,9})[ ,;:]\s*([0-9]{6}|[0-9]{6}[,.]\d{0,9})\s*$/,srid:"EPSG:32634",srname:"UTM 34N",get:function(e){return[Number(e[3].replace(",",".")),Number(e[2].replace(",","."))]}},{regexp:/^(34N)[ ,;:]\s*?([0-9]{6}|[0-9]{6}[,.]\d{0,9})[ ,;:]\s*([0-9]{7}|[0-9]{1,7}[,.]\d{0,9})\s*$/,srid:"EPSG:32634",srname:"UTM 34N",get:function(e){return[Number(e[2].replace(",",".")),Number(e[3].replace(",","."))]}},{regexp:/^(35N)[ ,;:]\s*([0-9]{7}|[0-9]{1,7}[,.]\d{0,9})[ ,;:]\s*([0-9]{6}|[0-9]{6}[,.]\d{0,9})\s*$/,srid:"EPSG:32635",srname:"UTM 35N",get:function(e){return[Number(e[3].replace(",",".")),Number(e[2].replace(",","."))]}},{regexp:/^(35N)[ ,;:]\s*?([0-9]{6}|[0-9]{6}[,.]\d{0,9})[ ,;:]\s*([0-9]{7}|[0-9]{1,7}[,.]\d{0,9})\s*$/,srid:"EPSG:32635",srname:"UTM 35N",get:function(e){return[Number(e[2].replace(",",".")),Number(e[3].replace(",","."))]}},{regexp:/^\d{1,2}[^ABIOYZabioyz]\s?[A-Za-z]{2}\s?([0-9]+)\s?([0-9]+)$/,srid:"mrgs",srname:"MRGS",get:function(e){return e[0].replace(/\s/g,"")}},{regexp:/^(6[3-6][0-9]{5}|6[3-6][0-9]{5}[,.]\d{0,9})[ ,;:]\s*([3-7][0-9]{5}|[3-7][0-9]{5}[,.]\d{0,9})\s*$/,srid:"EPSG:3301",srname:"L-EST",get:function(e){return[Number(e[2].replace(",",".")),Number(e[1].replace(",","."))]}},{regexp:/^([3-7][0-9]{5}|[3-7][0-9]{5}[,.]\d{0,9})[ ,;:]\s*(6[3-6][0-9]{5}|6[3-6][0-9]{5}[,.]\d{0,9})\s*$/,srid:"EPSG:3301",srname:"L-EST",get:function(e){return[Number(e[1].replace(",",".")),Number(e[2].replace(",","."))]}},{regexp:/^([-NS])?\s*([0-8]\d?|90)[ ’'°]+([0-9]{2})[ ’']+([0-9]{1,2}[,.]?\d{1,9})["]?[ ,;:]\s*([-EW])?\s*([0-1]\d{0,2}|\d{2})[ ’'°]+([0-9]{2})[ ’']+([0-9]{1,2}[,.]?\d{1,9})["]?\s*$/,srid:"EPSG:4326",srname:"WGS84 (dms)",get:function(e){var t=[Number(e[6])+Number(e[7])/60+Number(e[8].replace(",","."))/60/60,Number(e[2])+Number(e[3])/60+Number(e[4].replace(",","."))/60/60];return t[1]="-"===e[1]||"S"===e[1]?-t[1]:t[1],t[0]="-"===e[5]||"W"===e[5]?-t[0]:t[0],t}},{regexp:/^([-NS])?\s*([0-8]\d?|90)[ .’'°]+([0-9]{1,2}[,.]?\d{1,18})[’']?[ ,;:]\s*([-EW])?\s*([0-1]\d{0,2}|\d{2})[ ’'°]+([0-9]{1,2}[,.]?\d{1,18})[’']?\s*$/,srid:"EPSG:4326",srname:"WGS84 (dm)",get:function(e){var t=[Number(e[5])+Number(e[6].replace(",","."))/60,Number(e[2])+Number(e[3].replace(",","."))/60];return t[1]="-"===e[1]||"S"===e[1]?-t[1]:t[1],t[0]="-"===e[4]||"W"===e[4]?-t[0]:t[0],t}},{regexp:/^([-NS])?\s*([1-8]?\d(?:[,.]\d{1,18})?|90(?:\.0{1,18})?)[’'°]?[ ,;:]\s*([-EW])?\s*((?:1[0-7]|[1-9])?\d(?:[,.]\d{1,18})?|180(?:\.0{1,18})?)[’'°]?\s*$/,srid:"EPSG:4326",srname:"WGS84 (d)",get:function(e){var t=[Number(e[4].replace(",",".")),Number(e[2].replace(",","."))];return t[1]="-"===e[1]||"S"===e[1]?-t[1]:t[1],t[0]="-"===e[3]||"W"===e[3]?-t[0]:t[0],t}}]);function mo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var bo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"clear",value:function(){this.xhr&&"function"==typeof this.xhr.abort&&this.xhr.abort()}},{key:"toGeoJSON",value:function(e){return e.id=e.id||A(),{type:"Feature",id:e.id,geometry:{type:"Point",coordinates:Object(Ne.l)(e.coords,e.srid)},bbox:e.bbox||null,properties:e}}}])&&mo(t.prototype,n),o&&mo(t,o),e}(),go=n(112);function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ko(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var So=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ko(this,Ao(t).call(this))).title="Coordinate",e.query=null,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}(t,bo),n=t,(o=[{key:"test",value:function(e){for(var t=0,n=yo.length;t<n;t++){var o=e.match(yo[t].regexp);if(o&&o.length>0){var r={coords:yo[t].get(o),srid:yo[t].srid,srname:yo[t].srname};return"mrgs"===yo[t].srid&&(r.srid="EPSG:4326",r.coords=go.a.toPoint(r.coords)),r}}return!1}},{key:"find",value:function(e){var t=this;return this.query=e,new Promise(function(n,o){if(e.length<1)throw new Error(te("Query string empty, aborting!"));var r=t.test(e),a=[];r&&r.srid&&a.push(r),n(t.format(a))})}},{key:"format",value:function(e){var t=this;return e.map(function(e){return t.toGeoJSON({provider:t.title,name:"".concat(e.srname," ").concat(t.query),srid:e.srid,coords:e.coords})})}}])&&wo(n.prototype,o),r&&wo(n,r),t}();function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Co(e,t){return!t||"object"!==jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t){return(Po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Co(this,xo(t).call(this))).title="Addresses",e.xhr=null,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Po(e,t)}(t,bo),n=t,(o=[{key:"test",value:function(e){return e.length>=3}},{key:"find",value:function(e){var t=this;return new Promise(function(n,o){if(!t.test(e))throw new Error(te("Query string too short, aborting!"));t.geocode(e,function(e){if(!e)throw new Error(te("Unable to perform search!"));n(t.format(e))})})}},{key:"geocode",value:function(e,t){this.xhr&&"function"==typeof this.xhr.abort&&this.xhr.abort(),this.xhr=ie.a.ajax({type:"GET",crossDomain:!0,url:U.nominatim+"/search/",data:{q:e,countrycodes:"ee",format:"json"},dataType:"json",context:this}).done(t).fail(function(e){t(null),e.statusText})}},{key:"format",value:function(e){var t=this;return e.map(function(e){var n=e.boundingbox&&e.boundingbox.map(function(e){return Number(e)});return t.toGeoJSON({provider:t.title,id:e.place_id,name:e.display_name,srid:"EPSG:4326",coords:[Number(e.lon),Number(e.lat)],bbox:[n[2],n[0],n[3],n[1]]})})}}])&&Eo(n.prototype,o),r&&Eo(n,r),t}();n(372);function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ro(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t){return(Go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ro(this,Fo(t).call(this))).title="Features",e.layers=J("map/layer/layers"),e.geojson=new Me.a,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Go(e,t)}(t,bo),n=t,(o=[{key:"test",value:function(e){return e.length>=3}},{key:"find",value:function(e){var t=this;return new Promise(function(n,o){if(!t.test(e))throw new Error(te("Query string too short, aborting!"));t.searchFeatures(e,function(e){n(e)})})}},{key:"searchFeatures",value:function(e,t){var n=this,o=this.getAllFeatures().filter(function(t){var n=t.get("name");return n&&n.search(new RegExp(e,"i"))>-1}).map(function(e){return n.format(e)});"function"==typeof t&&t(o)}},{key:"getAllFeatures",value:function(){var e=[];return this.layers.forEach(function(t){t instanceof _e.a&&(e=e.concat(t.getSource().getFeatures()))}),e}},{key:"format",value:function(e){var t=this.geojson.writeFeatureObject(e);return t.properties.provider=this.title,t}}])&&To(n.prototype,o),r&&To(n,r),t}();n(373);function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Do(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Io(e,t,n){return(Io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wo(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Do(this,Wo(t).call(this,e))).el=ie()('\n      <div id="search" class="float-right">\n        <button class="btn btn-secondary d-inline-block d-sm-none toggle" aria-label="'.concat(te("Search"),'">\n          <i class="fa fa-search"></i>\n        </button>\n        <div class="d-none d-sm-block">\n          <div class="input-group">\n            <input type="text" class="form-control" placeholder="').concat(te("Search"),'">\n            <div class="input-group-append fill-width">\n              <button class="btn btn-secondary dropdown-toggle no-caret"\n                type="button"\n                data-toggle="dropdown"\n                aria-expanded="true"\n                disabled>\n                <i class="fa fa-search"></i>\n              </button>\n              <ul class="dropdown-menu dropdown-menu-right scrollable-menu" role="menu"></ul>\n            </span>\n          </div>\n        </div>\n      </div>\n    ')),n.state={results:[],open:!1,query:null},n.providers={coordinates:new So,features:new Mo,nominatim:new _o},n.format=new Me.a({featureProjection:J("map/projection")}),n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){var e=this;Io(Wo(t.prototype),"create",this).call(this),this.target&&this.el&&(this.resultsEl=this.el.find("ul"),this.el.on("click",".toggle",function(t){e.el.find(">.toggle").toggleClass("d-none d-inline-block"),e.el.find(">div").toggleClass("d-none")}),this.el.find(".dropdown-toggle").on("shown.bs.dropdown",function(){e.state.open=!0}).on("hidden.bs.dropdown",function(){e.state.open=!1}).on("click",function(t){var n=e.el.find("input").val().trim();e.query!==n&&(e.clear(),e.search(n))}),this.el.find("input").on("keyup",function(t){var n=ie()(t.target).val().trim();e.el.find(".dropdown-toggle").prop("disabled",n.length<1),n.length?13===t.keyCode&&(e.clear(),e.state.open=!0,e.search(n)):e.clear()}),this.resultsEl.on("click",".clear",function(t){e.clear(),e.el.find("input").val("").trigger("keyup")}),this.resultsEl.on("click","a",function(t){t.preventDefault(),t.stopPropagation();var n=J("map"),o=ie()(t.currentTarget).attr("data-id"),r=e.state.results.filter(function(e){return o===e.id})[0];if(r.bbox){var a=Object(Ne.n)(r.bbox,"EPSG:4326",J("map/projection"));n.getView().fit(a,{padding:[50,50,50,50],maxZoom:17,duration:500})}else n.getView().animate({center:Object(Ne.f)(r.geometry.coordinates),zoom:15,duration:500})}))}},{key:"render",value:function(){var e=null,t=[];this.state.results.forEach(function(n){e!==n.properties.provider&&(t.push('<li class="dropdown-header">'.concat(te(n.properties.provider),"</li>")),e=n.properties.provider),t.push('\n        <li>\n          <a href="#" class="dropdown-item"\n            data-id="'.concat(n.id,'" data-provider="').concat(e,'">\n            <i class="fa fa-map-marker-alt"></i>\n            ').concat(n.properties.name,"\n          </a>\n        </li>"))}),t.length||t.push('\n        <li class="dropdown-item">\n          <i class="fa fa-frown"></i>\n          '.concat(te("No result"),"\n        </li>")),t.push('\n      <div class="tools text-right">\n        <button class="btn btn-link clear">\n          <i class="fa fa-backspace"></i>\n        </button>\n        <button class="btn btn-link toggle d-inline-block d-sm-none" aria-label="'.concat(te("Close"),'">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>')),this.el.find(".dropdown-toggle").dropdown("update"),this.resultsEl&&(this.resultsEl.html(t.join("")),this.state.open&&(this.el.find(".dropdown-toggle").dropdown("toggle"),this.state.open=!1)),this.handleFeatures()}},{key:"clear",value:function(){var e=this;Object.keys(this.providers).forEach(function(t){e.providers[t].clear()}),this.state.results=[],this.query=null,this.render()}},{key:"search",value:function(e){var t=this,n=J("app/debug");this.query=e;var o=0,r=!1;this.searchStart(),Object.keys(this.providers).some(function(a){o++,t.providers[a].find(e).then(function(i){r||(t.state.results=t.state.results.concat(i)),"coordinates"===a&&i.length&&(r=!0,o=1),n&&console.debug("Search.search: query: ".concat(e,", results: ").concat(i.length))}).catch(function(e){n&&console.error("Search.search: error: ".concat(JSON.stringify(e)))}).finally(function(){--o<=0&&(t.render(),t.searchEnd())})})}},{key:"searchStart",value:function(){this.el.find(".dropdown-toggle i").removeClass("fa-search").addClass("fa-spinner fa-pulse")}},{key:"searchEnd",value:function(){this.el.find(".dropdown-toggle i").removeClass("fa-spinner fa-pulse").addClass("fa-search")}},{key:"handleFeatures",value:function(){if(this.state.results&&this.state.results.length){var e=this.createLayer(this.query,this.state.results);J("map/layer/overlays").push(e)}}},{key:"createLayer",value:function(e,t){return ut({type:"FeatureCollection",id:A(),title:"".concat(te("Search"),": ").concat(e),features:t,style:{stroke:{color:"#000000",width:2},fill:{color:O("#000000",.5)},circle:{stroke:{color:"#000000"},fill:{color:O("#000000",.3)},radius:5}}})}}])&&Uo(n.prototype,o),r&&Uo(n,r),t}();n(374);function qo(e){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ho(e,t){return!t||"object"!==qo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ho(this,zo(t).call(this,e))).el=ie()('<header id="header" class="panel-bar"></header>'),n.create(),n.components={geocache:new cn(n.el),lyrmngr:J("app/layerManager")&&new ho(n.el),search:J("app/searchEnabled")&&new Vo(n.el)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,Q),t}();n(375);function Zo(e){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ko(e,t){return!t||"object"!==Zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $o(e,t){return($o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ko(this,Qo(t).call(this,e))).id="info-tab",n.icon="fa fa-info-circle",n.el=ie()('\n      <div\n        class="tab-pane fade '.concat(n.id===J("app/settingsTabOpen")?"show active":"",'"\n        id="').concat(n.id,'"\n        role="tabpanel">\n      </div>\n    ')),n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$o(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){this.el.html('\n      <h5>\n        Geop\n        <i class="text-muted small">v1.0.0</i>\n      </h5>\n      <span class="attribution small">\n        <a href="http://openstreetmap.org" >OSM</a> |\n        <a href="http://www.maaamet.ee" >maa-amet</a> |\n        <a href="http://sookoll.ee" >oo</a>\n      </span>\n      <ul>\n        <li>'.concat(te("Geop is progressive web application with partial offline support."),"</li>\n        <li>").concat(te("Install it to Your home screen."),"</li>\n        <li>").concat(te("Add any GPX, GeoJSON, KML files or WMS layers to map from layers menu or drag and drop file."),"</li>\n        <li>").concat(te("App will recognize if geocaches are added to map."),"</li>\n        <li>").concat(te("Filter and search caches on map."),"</li>\n        <li>").concat(te("Search and display coordinates in WGS, L-Est, UTM and MGRS system."),"</li>\n        <li>").concat(te("Find streetview link and measure tools from context menu."),"</li>\n        <li>").concat(te("Add caches and map objects to geotrip. Reorder geotrip."),"</li>\n        <li>").concat(te("Navigate to cache with two tracking mode"),"</li>\n        <li>").concat(te("Share snapshot of app state via link or QR-code. Download geotrip as GPX-file."),"</li>\n      </ul>\n      <h5>").concat(te("Search coordinates"),"</h5>\n      <ul>\n        <li>WGS'84: lat, lon; kk.nnnn; kk° mm.nnn; kk° mm' ss''</li>\n        <li>L-EST'97: x, y; y, x</li>\n        <li>UTM zone 34N: x, y; y, x</li>\n        <li>UTM zone 35N: x, y; y, x</li>\n        <li>MGRS</li>\n      </ul>\n    "))}}])&&Xo(n.prototype,o),r&&Xo(n,r),t}(),tr=n(283),nr=n.n(tr);n(376);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ar(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ar(this,ir(t).call(this,e))).id="settings-tab",n.icon="fa fa-cog",n.el=ie()('\n      <div\n        class="tab-pane fade '.concat(n.id===J("app/settingsTabOpen")?"show active":"",'"\n        id="').concat(n.id,'"\n        role="tabpanel">\n      </div>\n    ')),n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){this.target&&this.el&&(this.target.append(this.el),this.render())}},{key:"render",value:function(){var e,t=this;this.el.html('\n      <div class="install mb-3">\n        <button\n          id="install"\n          class="btn btn-danger btn-lg btn-block">\n          <i class="fa fa-plus"></i>\n          '.concat(te("Install app to home screen"),'\n        </button>\n        <small class="form-text text-muted">\n          ').concat(te("Install web app to your home screen."),"\n        </small>\n      </div>\n      <h5>").concat(te("Language"),'</h5>\n      <div class="btn-group" role="group">\n        ').concat(Object.keys($.texts).map(function(e){return'\n            <button type="button"\n              class="btn btn-outline-primary set-locale-btn '.concat($.locale===e?"active":"",'"\n              data-locale="').concat(e,'">\n              ').concat(e,"\n            </button>")}).join(""),'\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Change language. App will reload after change!"),"\n      </small>\n      <h5>").concat(te("Keep awake"),'</h5>\n      <div class="btn-group-toggle" data-toggle="buttons">\n        <label class="btn btn-outline-secondary">\n          <input type="checkbox" id="settings-awake" autocomplete="off">\n          <i class="fa fa-mobile-alt"></i>\n          <span>').concat(te("Off"),'</span>\n        </label>\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Keep screen on. Use with caution, might train device battery!"),"\n      </small>\n      <h5>").concat(te("Account"),'</h5>\n      <div class="form-group">\n        <input type="text"\n          class="form-control"\n          id="settings-account"\n          placeholder="').concat(te("Username"),'"\n          value="').concat(J("app/account")||"",'"/>\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Enter geopeitus.ee or geocaching.com username. App will reload after change!"),"\n      </small>\n      <h5>").concat(te("Share only geotrip features"),'</h5>\n      <div class="btn-group" role="group">\n        <button type="button"\n          class="btn btn-outline-primary set-share-btn ').concat(J("app/shareOnlyTripFeatures")?"active":"",'"\n          data-share="on">\n          ').concat(te("On"),'\n        </button>\n        <button type="button"\n          class="btn btn-outline-primary set-share-btn ').concat(J("app/shareOnlyTripFeatures")?"":"active",'"\n          data-share="off">\n          ').concat(te("Off"),'\n        </button>\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Share only features added to geotrip."),"<br/>\n        ").concat(te("NB! Turning this off and sharing bookmark will store possibly big amount of data in service. It might fail. Use with caution!"),"\n      </small>\n      <h5>").concat(te("Reset app"),'</h5>\n      <div>\n        <button\n          id="settings-reset"\n          class="btn btn-warning">\n          <i class="fa fa-sync-alt"></i>\n          ').concat(te("Reset"),'\n        </button>\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Reset app to default. App will reload!"),"\n      </small>\n      <h5>").concat(te("Debug"),'</h5>\n      <div class="btn-group" role="group">\n        <button type="button"\n          class="btn btn-outline-primary set-debug-btn ').concat(J("app/debug")?"active":"",'"\n          data-debug="on">\n          ').concat(te("On"),'\n        </button>\n        <button type="button"\n          class="btn btn-outline-primary set-debug-btn ').concat(J("app/debug")?"":"active",'"\n          data-debug="off">\n          ').concat(te("Off"),'\n        </button>\n      </div>\n      <small class="form-text text-muted mb-3">\n        ').concat(te("Debug mode. Will write debug logs into file. App will reload after change!"),"\n      </small>\n      ").concat(J("app/debug")?'\n      <div class="mb-3">\n        <button\n          id="download-log"\n          class="btn btn-danger">\n          <i class="fa fa-download"></i>\n          '.concat(te("Download debug log"),'\n        </button>\n        <input type="file" style="display:none;" />\n      </div>\n      '):"","\n    ")),this.el.on("click","button.set-locale-btn",function(e){ee(ie()(e.currentTarget).data("locale"),$.texts),t.el.find("button.set-locale-btn").removeClass("active"),ie()(e.currentTarget).addClass("active"),re("warning",te("Language changed, page will reload!"),function(){ti()}),J("app/debug")&&console.debug("Config.render: Locale changed to ".concat(ie()(e.currentTarget).data("locale")))}),this.el.on("change","#settings-awake",function(e){e.target.checked?(document.addEventListener("click",m,!1),ie()(e.target).closest("label").find("span").html(te("On"))):(p.disable(),ie()(e.target).closest("label").find("span").html(te("Off"))),ie()(e.target).closest("label").toggleClass("btn-outline-secondary btn-success")}),this.el.on("blur","#settings-account",function(e){Y("app/account",e.target.value,!0),re("warning",te("Account changed, page will reload!"),function(){ti()}),J("app/debug")&&console.debug("Config.render: Account changed to ".concat(e.target.value))}),this.el.on("click","button.set-share-btn",function(e){Y("app/shareOnlyTripFeatures","on"===ie()(e.currentTarget).data("share"),!0),t.el.find("button.set-share-btn").removeClass("active"),ie()(e.currentTarget).addClass("active")}),this.el.on("click","#settings-reset",function(e){X(),re("warning",te("App resetted, page will reload!"),function(){R(null),ti()}),J("app/debug")&&console.debug("Config.render: App resetted")}),this.el.on("click","button.set-debug-btn",function(e){Y("app/debug","on"===ie()(e.currentTarget).data("debug"),!0),t.el.find("button.set-debug-btn").removeClass("active"),ie()(e.currentTarget).addClass("active"),re("warning",te("Debug changed, app will reload!"),function(){ti()}),J("app/debug")&&console.debug("Config.render: Debug changed to ".concat(ie()(e.currentTarget).data("debug")))}),this.el.on("click","#download-log",function(e){var t=d,n=new window.Blob([t.join("\n")],{type:"text/plain;charset=utf-8"});nr()(n,J("app/debugFile"))}),window.addEventListener("beforeinstallprompt",function(n){n.preventDefault(),e=n,t.el.find(".install").show()}),this.el.on("click","#install",function(n){t.el.find(".install").hide(),e.prompt(),e.userChoice.then(function(t){"accepted"===t.outcome?J("app/debug")&&console.debug("Config.render: User accepted the A2HS prompt"):J("app/debug")&&console.debug("Config.render: User dismissed the A2HS prompt"),e=null})})}}])&&rr(n.prototype,o),r&&rr(n,r),t}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fr(this,pr(t).call(this,e))).el=ie()('<div class="btn-group float-left" id="sidebar-open"></div>'),n.create(),n.sidebar=new Ct({target:ie()("#geop"),trigger:n.el.find("button"),position:"left",components:{Info:er,Config:cr},activeComponent:J("app/settingsTabOpen"),shadow:!0}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){this.target&&this.el&&(this.target.append(this.el),ie()("body").append(this.sidebar).append(this.shadow),this.render())}},{key:"render",value:function(){this.el.html('\n      <button type="button"\n        class="btn btn-secondary">\n        <i class="fa fa-ellipsis-h"></i>\n      </button>\n    ')}}])&&ur(n.prototype,o),r&&ur(n,r),t}(),yr=n(284);n(377);function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gr(e,t){return!t||"object"!==mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gr(this,vr(t).call(this,e))).el=ie()('<span class="float-right" id="scale-line"></span>'),n.state={control:null},n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;if(!this.state.control){this.state.control=new yr.a({className:"ol-scale-line",target:this.el[0]});var t=J("map");if(t)t.addControl(this.state.control);else J("map/que").push(function(t){t.addControl(e.state.control)})}}}])&&br(n.prototype,o),r&&br(n,r),t}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sr(this,jr(t).call(this,e))).el=ie()('<div class="btn-group float-right" id="fullscreen"></div>'),n.state={active:!1},n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.el.html('\n      <button type="button"\n        title="'.concat(te("Toggle fullscreen"),'"\n        disabled\n        class="btn btn-secondary">\n        <i class="fa fa-expand-arrows-alt"></i>\n      </button>\n    ')),this.test()&&(this.el.find("button").prop("disabled",!1),this.el.on("click","button",function(t){t.preventDefault(),e.toggle()}),ie()(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(t){e.toggleState()}))}},{key:"test",value:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled)}},{key:"toggle",value:function(){this.state.active?this.off():this.on()}},{key:"toggleState",value:function(){document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(this.state.active=!0,this.el.find("button").addClass("active")):(this.state.active=!1,this.el.find("button").removeClass("active"))}},{key:"on",value:function(){document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT)}},{key:"off",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}])&&Or(n.prototype,o),r&&Or(n,r),t}(),xr=n(285),Pr=n(117),_r=n(24);n(378);function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rr(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rr(this,Fr(t).call(this,e))).el=ie()('\n      <span id="mouse-position" class="mouse-position float-left d-none d-sm-block"></span>\n    '),n.animationEl=ie()('\n      <svg width="20" height="20"></svg>'),n.coordFormats=[{projection:"EPSG:4326",srname:"WGS",coordinateFormat:function(e){return Object(_r.f)(e,"{y}, {x}",4)}},{projection:"EPSG:4326",srname:"WGS dms",coordinateFormat:function(e){return Object(_r.k)(e,1)}},{projection:"EPSG:3301",srname:"L-EST",coordinateFormat:function(e){return Object(_r.f)(e,"{y}, {x}",0)}},{projection:"EPSG:4326",srname:"MGRS",coordinateFormat:function(e){return go.a.forward(e)}}],n.state={format:0,control:null,lock:!1,lastCoord:null,layer:null,overlay:new Pr.a({element:n.animationEl[0],positioning:"center-center"})},n.handlers={onclick:function(e){n.clicked(e)},animate:function(e){n.animate(e)}},n.create(),J("map/contextmenu").push({content:function(e){return'<i class="fa fa-map-marker-alt"></i>\n          '.concat(n.format(e),'\n          <button class="btn btn-link context-item-btn"><i class="far fa-clone"></i></button>')},onClick:function(e,t){n.createMarker(t)},onBtnClick:function(e,t){n.copy(n.format(t))},closeOnClick:!0}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;if(this.el.html('\n      <div class="btn-group dropup float-left">\n        <button type="button" class="btn btn-secondary lock">\n          <i class="fa fa-'.concat(this.state.lock?"lock":"lock-open",'"></i>\n        </button>\n        <button type="button"\n          class="btn btn-secondary dropdown-toggle dropdown-toggle-split"\n          data-toggle="dropdown">\n        </button>\n        <div class="dropdown-menu">\n          ').concat(this.coordFormats.map(function(t,n){return'\n              <a class="dropdown-item" href="#" data-format="'.concat(n,'">\n                <i class="far ').concat(n===e.state.format?"fa-dot-circle":"fa-circle",'"></i>\n                ').concat(t.srname,"\n              </a>")}).join(""),'\n        </div>\n      </div>\n      <button type="button" class="btn btn-link copy float-left">\n        <i class="far fa-clone"></i>\n        <span>').concat(this.coordFormats[this.state.format].srname,"</span>\n      </button>\n    ")),this.el.on("click",".lock",function(t){e.state.lock=!e.state.lock,e.activate(J("map")),ie()(t.currentTarget).find("i").toggleClass("fa-lock fa-lock-open")}),this.el.on("click",".copy",function(t){var n=e.el.find(".coords").html();e.copy(n)}),this.el.on("click","a[data-format]",function(t){e.state.format=ie()(t.currentTarget).data("format"),e.state.control.setProjection(e.coordFormats[e.state.format].projection),e.state.control.setCoordinateFormat(e.coordFormats[e.state.format].coordinateFormat),e.el.find("a[data-format] i").removeClass("fa-dot-circle").addClass("fa-circle"),ie()(t.currentTarget).find("i").removeClass("fa-circle").addClass("fa-dot-circle"),e.el.find("button.copy span").html(e.coordFormats[e.state.format].srname)}),!this.state.control){this.state.control=new xr.a({coordinateFormat:this.coordFormats[this.state.format].coordinateFormat,projection:this.coordFormats[this.state.format].projection,className:"float-left coords",target:this.el[0],undefinedHTML:""});var t=J("map");if(t)this.activate(t);else J("map/que").push(function(t){e.activate(t)})}}},{key:"activate",value:function(e){e.addOverlay(this.state.overlay),e.on("singleclick",this.handlers.animate),this.state.lock?(e.removeControl(this.state.control),this.el.append('<div class="float-left coords"></div>'),e.on("click",this.handlers.onclick)):(this.el.find(".coords").remove(),e.un("click",this.handlers.onclick),e.addControl(this.state.control))}},{key:"clicked",value:function(e){this.el.find(".coords").html(this.format(e.coordinate))}},{key:"copy",value:function(e){h(e).then(function(){re("success","".concat(te("Coordinates")," ").concat(e," ").concat(te("copied to clipboard")))}).catch(function(){re("error",te("Unable to copy to clipboard"))})}},{key:"format",value:function(e){var t=Object(Ne.m)(e,J("map/projection"),this.coordFormats[this.state.format].projection);return this.coordFormats[this.state.format].coordinateFormat(t)}},{key:"createMarker",value:function(e){if(!this.state.layer){var t=J("layer/mousePositionId");if(t){var n=J("map/layer/overlays").getArray().filter(function(e){return e.get("id")===t});n&&n[0]&&(this.state.layer=n[0])}this.state.layer||(this.state.layer=this.createLayer(),J("map/layer/overlays").push(this.state.layer)),Y("layer/mousePositionId",this.state.layer.get("id"),!0)}var o=(new Me.a).readFeature({type:"Feature",id:A(),properties:{name:this.format(e)},geometry:{type:"Point",coordinates:e}});this.state.layer.getSource().addFeature(o),Y("layerchange",this.state.layer.get("id"))}},{key:"createLayer",value:function(){return ut({type:"FeatureCollection",id:A(),title:"Features",style:{stroke:{color:"#000000",width:2},fill:{color:O("#000000",.5)},circle:{stroke:{color:"#000000"},fill:{color:O("#000000",.3)}}}})}},{key:"animate",value:function(e){var t=this,n=e.coordinate;this.state.overlay.setPosition(n),this.animationEl.html('<circle id="map-click-animation" cx="10" cy="10" r="0" fill="#000" opacity="0.5"/>'),setTimeout(function(){t.state.overlay.setPosition(void 0),t.animationEl.html("")},500)}}])&&Tr(n.prototype,o),r&&Tr(n,r),t}();n(379);function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){return!t||"object"!==Nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ur(this,Dr(t).call(this,e))).el=ie()('<footer id="statusbar" class="panel-bar"></footer>'),n.create(),n.components={settings:J("app/settings")&&new hr(n.el),fullscreen:J("app/fullScreen")&&new Cr(n.el),bookmark:J("app/shareState")&&new Oe(n.el),scaleline:J("app/scaleLine")&&new kr(n.el),mouseposition:J("app/mousePosition")&&new Mr(n.el)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(t,Q),t}();function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qr(this,Hr(t).call(this,e))).elPlus=ie()('\n      <button class="btn btn-link" title="'.concat(te("Zoom in"),'"><i class="fa fa-plus"></i></button>\n    ')),n.elMinus=ie()('\n      <button class="btn btn-link" title="'.concat(te("Zoom out"),'"><i class="fa fa-minus"></i></button>\n    ')),n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,Q),n=t,(o=[{key:"create",value:function(){var e=this;this.target&&this.elPlus&&(this.target.append(this.elPlus),this.elPlus.on("click",function(t){var n=J("map").getView(),o=n.getZoom()+1;e.zoomTo(n,o)})),this.target&&this.elMinus&&(this.target.append(this.elMinus),this.elMinus.on("click",function(t){var n=J("map").getView(),o=n.getZoom()-1;e.zoomTo(n,o)}))}},{key:"zoomTo",value:function(e,t){e.animate({zoom:t,duration:250,anchor:J("map/anchor")&&J("map/anchor").getCoordinates()})}}])&&Vr(n.prototype,o),r&&Vr(n,r),t}();n(380);function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xr(e,t){return!t||"object"!==Jr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $r=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xr(this,Kr(t).call(this,e))).el=ie()('\n      <button id="compass" class="btn btn-link" title="'.concat(te("North up!"),'">\n        <i class="icon"></i>\n      </button>\n    ')),n.state={removed:!0},J("map/que").push(function(e){var t=e.getView();n.rotateIcon(t),t.on("change:rotation",function(e){n.rotateIcon(t)})}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){this.el.on("click",function(e){J("map").getView().animate({rotation:0,duration:250,anchor:J("map/anchor")&&J("map/anchor").getCoordinates()})})}},{key:"rotateIcon",value:function(e){var t=this,n=e.getRotation();0!==n&&this.state.removed?(this.create(),this.state.removed=!1):0===n&&this.el.fadeOut(400,function(){t.el.remove(),t.el.show(),t.state.removed=!0}),this.el.find(".icon").css({"-webkit-transform":"rotate(".concat(n,"rad)"),"-moz-transform":"rotate(".concat(n,"rad)"),transform:"rotate(".concat(n,"rad)")})}}])&&Zr(n.prototype,o),r&&Zr(n,r),t}(),ea=n(286);n(381);function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oa(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ia=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oa(this,ra(t).call(this,e))).el=ie()('\n      <button id="geolocation" class="btn btn-link" disabled title="'.concat(te("My location"),'">\n        <i class="fa fa-location-arrow"></i>\n      </button>\n    ')),n.state={active:0,status:["","active","tracking"],track:new Ht.a(new qt.a([])),position:new Ht.a({id:"position",radius:0,geometry:new Vt.a([])}),zoom:16,layer:n.createLayer(),locator:new ea.a({projection:J("map/projection"),trackingOptions:{enableHighAccuracy:!0,maximumAge:1e4,timeout:3e5}}),isFirst:!1,lastPosition:null,lastHeading:null},n.handlers={updateView:function(e){n.updateView(e)},disableTracking:function(e){n.disableTracking()}},n.test()&&(window.geopLocator=n.state.locator,n.create(),n.init()),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.el.prop("disabled",!1),this.el.on("click",function(t){e.state.active=e.state.active+1>=e.state.status.length?0:e.state.active+1,0===e.state.active?(e.disable(),ie()(t.currentTarget).removeClass(e.state.status.join(" "))):(e.enable(),ie()(t.currentTarget).addClass(e.state.status[e.state.active]))})}},{key:"test",value:function(){return!!navigator.geolocation}},{key:"init",value:function(){var e=this;this.state.layer.getSource().addFeatures([this.state.track,this.state.position]),this.state.locator.on("change:position",function(t){e.positionChanged(t)}),this.state.locator.on("change:heading",function(t){e.headingChanged(t)}),this.state.locator.on("change:accuracy",function(t){e.accuracyChanged(t)}),this.state.locator.on("change:speed",function(t){e.speedChanged(t)}),this.state.locator.on("error",function(t){e.error(t)})}},{key:"error",value:function(e){this.disable(),this.el.removeClass(this.state.status.join(" "));var t=te("Unable to find location.");switch(e.code){case e.PERMISSION_DENIED:t=te("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:t=te("Location information is unavailable.");break;case e.TIMEOUT:t=te("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:t=te("An unknown error occurred.")}re("error",t),J("app/debug")&&console.error("geolocation error",JSON.stringify(e))}},{key:"enable",value:function(){var e=J("map");"tracking"===this.state.status[this.state.active]?(Y("map/anchor",this.state.position.getGeometry()),this.updateView(),e.on("pointerdrag",this.handlers.disableTracking),e.render()):(this.state.isFirst=!0,this.searchStart(),this.state.layer.setMap(e),this.state.locator.setTracking(!0))}},{key:"disable",value:function(){this.disableTracking(),this.searchEnd(),this.state.locator.setTracking(!1),this.state.position.getGeometry().setCoordinates([]),this.state.track.getGeometry().setCoordinates([]),this.state.layer.setMap(null),this.state.lastPosition=null,this.state.lastHeading=null,this.state.active=this.state.status.indexOf("")}},{key:"disableTracking",value:function(){J("map").un("pointerdrag",this.handlers.disableTracking),Y("map/anchor",null),this.el.removeClass(this.state.status[this.state.active]),this.state.active=this.state.status.indexOf("active")}},{key:"searchStart",value:function(){this.el.find("i").removeClass("fa-location-arrow").addClass("fa-spinner fa-pulse")}},{key:"searchEnd",value:function(){this.el.find("i").removeClass("fa-spinner fa-pulse").addClass("fa-location-arrow")}},{key:"positionChanged",value:function(e){var t=this.state.locator.getPosition();if(t&&(this.state.lastPosition=t,this.state.position.getGeometry().setCoordinates(t),this.state.track.getGeometry().appendCoordinate(t),!0===this.state.isFirst)){var n=J("map").getView();n.setCenter(t),n.setZoom(this.state.zoom),this.state.isFirst=!1,this.searchEnd()}this.updateView()}},{key:"headingChanged",value:function(e){var t=this.state.locator.getHeading();void 0!==t&&(this.state.lastHeading=t,this.state.position.set("heading",t)),this.updateView()}},{key:"accuracyChanged",value:function(e){var t=this.state.locator.getAccuracy();void 0!==t&&this.state.position.set("radius",t),this.updateView()}},{key:"speedChanged",value:function(e){var t=this.state.locator.getSpeed()||0;this.state.position.set("speed",t),this.updateView()}},{key:"getCenterWithHeading",value:function(e,t,n){var o=J("map").getSize();return[e[0]-Math.sin(t)*o[1]*n*1/4,e[1]+Math.cos(t)*o[1]*n*1/4]}},{key:"updateView",value:function(){if(J("app/debug")&&console.debug("updateView: ".concat(JSON.stringify(this.state.lastPosition)," ").concat(this.state.lastHeading)),"tracking"===this.state.status[this.state.active]){var e=J("map").getView();this.state.lastPosition&&this.state.lastHeading?(e.setCenter(this.getCenterWithHeading(this.state.lastPosition,-this.state.lastHeading,e.getResolution())),e.setRotation(-this.state.lastHeading)):this.state.lastPosition?e.setCenter(this.getCenterWithHeading(this.state.lastPosition,e.getRotation(),e.getResolution())):e.setRotation(-this.state.lastHeading)}}},{key:"createLayer",value:function(){var e=Je({icon:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAyCAMAAABvV9spAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABUFBMVEUAAABpaWkAAAAAAAAA AAAAAAAAAABpaWkAAAAAAAAAAAAAAAAAAAA1NTUAAAAAAAAAAAAAAAAAAAAPDw+4uLje3t709PQP Dw8AAAAAAAAAAAAAAAAAAAAAAAB8fHzv7+98fHwAAAAAAAAAAADAwMD+/v4AAAAAAAAAAACJiYkA AAAmJiby8vLLy8vl5eUAAAD29vZWVlYAAAA5OTn+/v4AAADz8/MAAAAAAADh4eEAAAAAAAC7u7sA AADo6OgAAABbW1v6+voAAAAAAACdnZ339/c9PT3d3d0AAAAAAAAAAACRkZHHx8fh4eH09PQAAAAA AAAAAAAAAAD////6/f7g8Plqt+A0ndUHh8uZzuoNis0AhMqSyujb7vgKicxhs94pmNPy+fwChcr5 /P42ntV0vOLv9/sbkdC43fAEhsvN5/UsmdP5/P2i0uxsuOA5n9bwio4hAAAAU3RSTlMAIx0gEhQT JgIGMzpBTS0mAxYqQpTE6D8pGwQOGC5h3F0kDw2K+yUKI10fNeCTwxnrQRo6/iziFSe6ESF/K8gI RvIFC2XqO7MBBx5dk7ziEBcoCTVzjyoAAAABYktHRFN6Zx0GAAAACXBIWXMAAAFiAAABYgFfJ9BT AAAAB3RJTUUH4gwECRg4eAJxNwAAAYNJREFUOMvt0ls3AlEUwPFNEzO6mIkyU7nUSIN0pUE0zKCL W7VDhO6Rku//5iQ0H8BalrX8H85Z+/dwHvY6AP/9TGPjBsponJgcTjTQzOCeMpnNFovZZJ0eTAwN LGHONjNrdyA67LNzvECYBSe43PMLi4hYLJJjccnjBYIguvhlH15d35RKN9dX6FteMZJ3/EZp1Ye3 d+WP7m7Rt7pG+cElrAfwvvzdPQbWBRdQ0gY+PI748QE3JAo4PoiVsq4KBnkOQtYwVvVcxbA1BEIE a3U912sYESAa22yU9FxqbMai4N6KY1PPTYxvuUHe3sGWnlu4sy3DbmIP208jfWrjXmIXxNB+Ep87 X9p5xuR+SASFMhwc4kt3qN0XPDwwUAqomiwdHWPvtf/21n/t4fGRJGsq2bfISScp/Cx1InEi2Xea zYhylj89O7+4OD875bOymGHTQJzRLnNZT95my3uyuUuNGejAVUXzUjLHyZRXU9ShEqdZJ6MU/P6C wjhZOv3bv/Bv9Q7DpHOEPfXX5AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0xMi0wNFQxNjoyNDo1 Ni0wNzowMAoLzxUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMTItMDRUMTY6MjQ6NTYtMDc6MDB7 VnepAAAAAElFTkSuQmCC"}}),t=Je({icon:{rotation:0,rotateWithView:!0,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAyCAMAAABvV9spAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABxVBMVEUAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADn5+fn5+cAAAAAAACioqIAAAAAAAAAAAAAAADt7u7m 8vkAAAAAAAAAAACxsbEAAAAcHBzz9PXT6vUAAAAAAADFxcUAAAAAAAAAAABGRkb4+fq63vEAAAAA AADX19f+//90dHT8/f3J5PMAAAAAAADo6Ojs7e2qqqr8/f3JyclRUVEAAADw8PLq6+tpaWkAAAAA AAAAAADx8fLMzMy9vb0AAAAAAAAAAAA1NTW6urrLy8sAAAAAAAAAAAAAAAAPDw+4uLje3t709PQA AAAAAAB8fHzv7+8AAADAwMD+/v4AAACJiYkAAAAmJiby8vLLy8sAAADl5eX29vZWVlYAAAA5OTn+ /v7z8/Ph4eG7u7sAAADo6OhbW1v6+vqdnZ339/c9PT3d3d2RkZHHx8fh4eH09PQAAAAAAAD///9h s94ChcpGptkAhMovm9Sf0essmdN8wOTA4PL6/f7g8Plqt+A0ndUHh8uZzuoNis2Syujb7vgKicwp mNPy+fz5/P42ntV0vOLv9/sbkdC43fAEhsvN5/X5/P2i0uxsuOA5n9YUwW0GAAAAdXRSTlMAAQID BAYICgsRFAwdop8TIF0HDxws1v0FFyd8Hzfp/RgplQkSIUL1/g0qqv5N/P4VJLzgV/ulW0XBzlxA Pj3EdHg5P0FNd3AOGSYzQpTE6B4uYdwtivsjXRs14JMWw+tBGjr+4rp/K8hG8mXqO7Ndk7ziEChI 22u6AAAAAWJLR0R1qGqY+wAAAAlwSFlzAAABYgAAAWIBXyfQUwAAAAd0SU1FB+IMBAUxJCFfS/cA AAJeSURBVDjL7ZPXUxpRFIfv7rIFMBFFdBc1srKoi22xx5ZEMQErsbCiYu+9HRDF2Huvf292QYTk Le/5Hu6d+ebMuWfO/C5CETAMJzQaAscwlAhGkBRNUySB/WUZrU6nZf7wGE7qdUkfPibp9CQe95iG TjakAKQYkmkNFm+RakwzpWdkpJvSjKnvbXCW4cyZEAhAppljWDxWTGmzsj/lBIM5n7KztNRbOc7q LXwubIVCW5DLW/TRcoywCra8/IKQQkF+nk2wquUYzooWe2HRtqq3iwrtFpFVhox0Li7ZCe+Wlu6G d0qKo92VmSVHGfwCKC8H5SpzSOrsyoNcBUBlVXVNTXVVJUAFpz6q6s9QW1ff0NjYUF9XC1+imhS5 r9+amp3Olhans7np+w9OWQwiSJe7ta29o7MLoKuzo72t1eIiCaSxCp6f3T0AsLenHD3dvR7BqkGk 6Ob7vLB/cHh0dHiwD94+3i2SiNbJ/V44PglFODkGb7+so5HLNzAIp6F3TmFwwOdCgjwEZ+dxfX4G Q7KA/PwwBEIJBGCY9yN37whcJOoLGOl1I98oXAYTdfASRn1obHzi6ihRH11NjI8hi2kSrhP1NUya LEgyT8FNor6BKbOEtLZpuL2L27tbmLZpkeiemYX7h5h9uIfZGbeIKMEwNw+P4agNP8L8nEGgEMtI 8sIiPD2/vL6+PD/B4oIsMayyb9EvLy3DG8tLsl9U9q0EUJQ8/Mrq2vr62uoK75HESAzVbG9wHsem 3b7p8HAbsYxjBEsxRkHy+yXByFBsLLLqvyEpK01bKVL9P+g//8Bv4afHimhpWRsAAAAldEVYdGRh dGU6Y3JlYXRlADIwMTgtMTItMDRUMTI6NDk6MzYtMDc6MDARlu33AAAAJXRFWHRkYXRlOm1vZGlm eQAyMDE4LTEyLTA0VDEyOjQ5OjM2LTA3OjAwYMtVSwAAAABJRU5ErkJggg=="}}),n=Je({stroke:{color:"rgba(255, 0, 0, 0.5)",width:3,lineDash:[5,5]}}),o=Je({fill:{color:"rgba(0, 0, 0, 0.05)"},geometry:function(e){if("position"===e.get("id")){var t=e.getGeometry().getCoordinates(),n=Object(Ne.l)(t);return new $t.a(t,e.get("radius")*v(n))}}});return ut({type:"FeatureCollection",title:"Geolocation",style:function(r){var a=[n];return"position"===r.get("id")&&(r.get("radius")>10&&r.get("radius")<5e3&&a.push(o),r.get("speed")>1?a.push(t):a.push(e),r.get("heading")&&t.getImage().setRotation(r.get("heading"))),a}})}}])&&na(n.prototype,o),r&&na(n,r),t}();n(382);function sa(e){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){return!t||"object"!==sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ca(this,la(t).call(this,e))).el=ie()('<nav id="toolbar" class="btn-group-vertical btn-group-lg"></nav>'),n.create(),n.components={zoom:new Yr(n.el),geolocation:J("app/geoLocation")&&new ia(n.el),compass:new $r(n.el)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,Q),t}();n(383);function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ha(e,t){return!t||"object"!==pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ba=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ha(this,ya(t).call(this,e))).el=ie()('<div id="contextmenu-map"></div>');var o=J("map/contextmenu");return o||Y("map/contextmenu",o=[]),n.state={overlay:null,items:o},n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.state.overlay=new Pr.a({element:this.el[0],autoPan:!0,autoPanMargin:150,positioning:"center-center",offset:[0,0]});var t=J("map");t?this.init(t):J("map/que").push(function(t){e.init(t)})}},{key:"init",value:function(e){var t=this;e.addOverlay(this.state.overlay),e.on("click",function(e){t.el.popover("dispose")}),e.getViewport().addEventListener("contextmenu",function(n){n.preventDefault();var o,r=e.getEventCoordinate(n),a=e.forEachFeatureAtPixel(e.getEventPixel(n),function(e,t){return[t,e]});a&&a[1].getGeometry()instanceof Vt.a?(r=a[1].getGeometry().getCoordinates(),o=t.getContent(r)):o=t.getContent(r),t.open(r,o)})}},{key:"open",value:function(e,t){this.el.popover("dispose"),this.state.overlay.setPosition(e),this.el.popover(t.definition),this.el.on("shown.bs.popover",function(e){t.onShow(ie()(e.target).data("bs.popover").tip)}),this.el.on("hidden.bs.popover",t.onHide),this.el.popover("show")}},{key:"getContent",value:function(e){var t=this,n=this.state.items.map(function(t,n){var o="function"==typeof t.content?t.content(e):t.content;return'<li class="list-group-item item-'.concat(n,'">').concat(o,"</li>")});return{definition:{container:this.el,placement:"right",animation:!1,html:!0,content:n.join(""),offset:20*(this.state.items.length-1)+"px, 0",template:'\n          <div class="contextmenu popover">\n            <div class="arrow"></div>\n            <div class="popover-body"></div>\n          </div>'},onShow:function(n){ie()(n).on("contextmenu",function(e){e.stopPropagation()}),t.state.items.forEach(function(o,r){"function"==typeof o.onClick&&ie()(n).on("click",".item-"+r,function(n){n.preventDefault(),o.onClick(n,e),o.closeOnClick&&t.el.popover("dispose")}),"function"==typeof o.onBtnClick&&ie()(n).on("click",".item-".concat(r," .context-item-btn"),function(n){n.preventDefault(),n.stopPropagation(),o.onBtnClick(n,e),o.closeOnClick&&t.el.popover("dispose")})})},onHide:function(){}}}}])&&da(n.prototype,o),r&&da(n,r),t}();function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Aa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=va(this,wa(t).call(this,e)),J("map/contextmenu").push({content:'<i class="fa fa-street-view"></i> '.concat(te("Street view")),onClick:function(e,t){var n=Object(Ne.l)(t).reverse().join(",");ie()("<a>").attr("href",U.streetview+n).attr("target","_blank")[0].click()}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(t,Q),t}(),Oa=n(147),Sa=n(66),ja=n(271),Ea=n(174),Ca=n(272),xa=n(31);n(384);function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function La(e,t){return!t||"object"!==Pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fa=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=La(this,Ta(t).call(this,e))).el=ie()('\n      <div class="alert small alert-warning alert-dismissible measure" role="alert">\n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n          <i class="fa fa-times"></i>\n        </button>\n        <div class=""></div>\n      </div>\n    '),n.state={map:null,measureType:null,snapTolerance:10,snapFeatures:null,layer:null,source:null,drawing:new Ht.a({geometry:new qt.a([])}),circle:new Ht.a,sketch:new Ht.a({geometry:new qt.a([])}),measureLine:new qt.a([])},n.interaction={snap:null,modify:new ja.a({features:new It.a([n.state.drawing]),insertVertexCondition:function(e){return"circle"===n.state.measureType?Object(xa.h)(e):Object(xa.c)(e)},deleteCondition:function(e){return Object(xa.d)(e)},style:Je({circle:{radius:5,stroke:{color:"black",width:1},fill:{color:"white"}}})})},n.handlers={onmodify:function(e){n.onmodify(e)},clicked:function(e){n.clicked(e)},mousemoved:function(e){n.mousemoved(e)}},J("map/contextmenu").push({content:'<i class="fa fa-ruler-combined"></i> '.concat(te("Measure"),'\n        <button class="btn btn-link context-item-btn"><i class="far fa-dot-circle"></i></button>'),onClick:function(e,t){n.init(t)},onBtnClick:function(e,t){n.init(t,"circle")},closeOnClick:!0}),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(t,Q),n=t,(o=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"distance";this.state.map||(this.state.map=J("map")),this.state.layer||(this.state.layer=this.createLayer(),this.state.source=this.state.layer.getSource(),this.state.layer.setMap(this.state.map)),this.reset(),this.state.measureType=t,this.render(),this.state.snapFeatures=new It.a(this.getAllFeatures()),this.state.drawing.getGeometry().setCoordinates([e]),this.state.snapFeatures.push(this.state.drawing),"circle"===t?(this.state.circle.setGeometry(new $t.a(e)),this.state.source.addFeatures([this.state.circle,this.state.drawing,this.state.sketch])):this.state.source.addFeatures([this.state.drawing,this.state.sketch]),J("components/featureInfo")&&J("components/featureInfo").disable(),this.enableClick(),this.state.map.getInteractions().getArray().forEach(function(e){e instanceof Ea.a&&e.setActive(!1)})}},{key:"createLayer",value:function(){return ut({type:"FeatureCollection",id:A(),title:"Measure",style:[{stroke:{color:"black",width:1},fill:{color:"rgba(255, 255, 255, 0)"}},{circle:{radius:4,stroke:{color:"black",width:1},fill:{color:"white"}},geometry:function(e){if(e.getGeometry()instanceof qt.a){var t=e.getGeometry().getCoordinates();return new Oa.a(t)}}}]})}},{key:"render",value:function(){var e=this;this.el&&this.el.alert("close");var t="";"circle"===this.state.measureType?t+='\n        <div class="form-inline">\n          <label for="angle">'.concat(te("Angle"),': </label>\n          <input type="text" name="angle" class="form-control input-sm" readonly> &deg;\n        </div>\n        <div class="form-inline">\n          <label for="radius">').concat(te("Radius"),': </label>\n          <input type="text" name="radius" class="form-control input-sm" readonly> m\n        </div>'):t+="\n        ".concat(te("Length"),": ").concat(te("to finish, click on end"),"<br>\n        ").concat(te("Area"),": ").concat(te("to finish, click on beginning")),this.el.find("div").html(t),ie()("body").append(this.el),"circle"===this.state.measureType&&(this.el.on("focus","input",function(t){e.interaction.modify.setActive(!1)}),this.el.on("blur","input",function(t){var n=e.el.find("input[name=angle]").val(),o=e.el.find("input[name=radius]").val(),r=e.state.drawing.getGeometry().getCoordinates(),a=e.getCoordinateByAngleDistance(r[0],Number(n),Number(o));e.state.drawing.getGeometry().setCoordinates([r[0],a]),e.interaction.modify.setActive(!0)})),this.el.on("closed.bs.alert",function(){e.reset()})}},{key:"updateResults",value:function(){if("circle"===this.state.measureType)this.updateCircleResults();else{var e=S(this.state.drawing.getGeometry()),t="".concat(te("Length"),": ").concat(e),n=this.state.drawing.getGeometry().getCoordinates();if(n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]){var o=j(new Sa.b([n]));t+="<br>".concat(te("Area"),": ").concat(o)}else t+="<br>".concat(te("Area"),": ").concat(te("to finish, click on beginning"));this.el.find("div").html(t)}}},{key:"updateCircleResults",value:function(){var e=this.state.sketch.getGeometry(),t=e.getCoordinates();0===t.length&&(t=(e=this.state.drawing.getGeometry()).getCoordinates());var n=t[0],o=t[t.length-1],r=b(Math.atan2(o[0]-n[0],o[1]-n[1]));r<0&&(r=360+r);var a=Object(s.c)(e);this.el.find("input[name=angle]").val(Math.round(100*(r+1e-5))/100),this.el.find("input[name=radius]").val(Math.round(1e3*(a+1e-5))/1e3)}},{key:"reset",value:function(){this.state.drawing.getGeometry().un("change",this.handlers.onmodify),this.state.map.removeInteraction(this.interaction.modify),this.state.map.removeInteraction(this.interaction.snap),this.state.snapFeatures=null,this.disableClick(),J("components/featureInfo")&&J("components/featureInfo").enable(),this.state.drawing.getGeometry().setCoordinates([]),this.state.sketch.getGeometry().setCoordinates([]),"circle"===this.state.measureType&&this.state.circle.setGeometry(null),this.state.source.clear(),this.state.map.getInteractions().getArray().forEach(function(e){e instanceof Ea.a&&e.setActive(!0)})}},{key:"enableClick",value:function(){this.state.map.on("click",this.handlers.clicked),this.state.map.on("pointermove",this.handlers.mousemoved)}},{key:"disableClick",value:function(){this.state.map.un("click",this.handlers.clicked),this.state.map.un("pointermove",this.handlers.mousemoved)}},{key:"clicked",value:function(e){this.state.sketch.getGeometry().setCoordinates([]);var t=this.state.drawing.getGeometry().getCoordinates(),n=this.getSnappedCoordinate(e.coordinate,this.state.snapFeatures.getArray(),this.state.snapTolerance);if("circle"===this.state.measureType){var o=t[0];this.state.drawing.getGeometry().setCoordinates([o,n]),this.el.find("input").prop("readonly",!1),this.finish()}else t.length>1&&t[0][0]===n[0]&&t[0][1]===n[1]?(t.push(n),this.state.drawing.getGeometry().setCoordinates(t),this.finish()):t.length>1&&t[t.length-1][0]===n[0]&&t[t.length-1][1]===n[1]?this.finish():(t.push(n),this.state.drawing.getGeometry().setCoordinates(t))}},{key:"onmodify",value:function(e){if("circle"===this.state.measureType){var t=this.state.drawing.getGeometry().getCoordinates(),n=this.state.circle.getGeometry(),o=this.getCoordinatesDistance(t[0],t[1]);n.setCenter(t[0]),n.setRadius(o)}this.updateResults()}},{key:"mousemoved",value:function(e){var t=this.state.drawing.getGeometry().getCoordinates(),n="circle"===this.state.measureType?t[0]:t[t.length-1],o=this.getSnappedCoordinate(e.coordinate,this.state.snapFeatures.getArray(),this.state.snapTolerance);if(this.state.sketch.getGeometry().setCoordinates([n,o]),"circle"===this.state.measureType){var r=this.getCoordinatesDistance(n,o);this.state.circle.getGeometry().setRadius(r),this.updateCircleResults()}else{var a=t.slice(0);a.push(o),this.state.measureLine.setCoordinates(a),this.el.find("div").html("\n        ".concat(te("Length"),": ").concat(S(this.state.measureLine),"<br>\n        ").concat(te("Area"),": ").concat(te("to finish, click on beginning"),"\n      "))}}},{key:"finish",value:function(){this.disableClick(),this.state.sketch.getGeometry().setCoordinates([]),this.updateResults(),this.state.map.addInteraction(this.interaction.modify),this.interaction.snap=new Ca.a({features:this.state.snapFeatures}),this.state.map.addInteraction(this.interaction.snap),this.state.drawing.getGeometry().on("change",this.handlers.onmodify)}},{key:"getSnappedCoordinate",value:function(e,t,n){for(var o=this,r=e,a=function(e,t){var n=o.state.map.getPixelFromCoordinate(e),r=o.state.map.getPixelFromCoordinate(t);return o.getCoordinatesDistance(n,r)},i=0,s=t.length;i<s;i++){var c=t[i].getGeometry().getCoordinates();if(c&&"number"==typeof c[0]){if(a(c,e)<=n){r=c;break}}else{var l=c.filter(function(t){if(a(t,e)<=n)return!0});l.length>0&&(r=l[0])}}return r}},{key:"getCoordinateByAngleDistance",value:function(e,t,n){var o=6378137,r=Object(Ne.l)(e),a=g(t),i=g(r[1]),s=g(r[0]);return i=Math.asin(Math.sin(i)*Math.cos(n/o)+Math.cos(i)*Math.sin(n/o)*Math.cos(a)),s+=Math.atan2(Math.sin(a)*Math.sin(n/o)*Math.cos(i),Math.cos(n/o)-Math.sin(i)*Math.sin(i)),Object(Ne.f)([b(s),b(i)])}},{key:"getCoordinatesDistance",value:function(e,t){var n=Math.abs(e[0]-t[0]),o=Math.abs(e[1]-t[1]);return Math.sqrt(n*n+o*o)}},{key:"getAllFeatures",value:function(){var e=[];return J("map/layer/layers").forEach(function(t){"FeatureCollection"===t.get("conf").type&&(e=e.concat(t.getSource().getFeatures()))}),J("map/layer/overlays").forEach(function(t){"FeatureCollection"===t.get("conf").type&&"Measure"!==t.get("title")&&(e=e.concat(t.getSource().getFeatures()))}),e}}])&&_a(n.prototype,o),r&&_a(n,r),t}();n(385);function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ma(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Na(e,t){return!t||"object"!==Ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ia=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Na(this,Ua(t).call(this,e))).el=ie()('<div id="tooltip"></div>'),n.state={tooltipVisible:!1,overlay:null,currentFeature:null},n.create(),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Da(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.state.overlay=new Pr.a({element:this.el[0],autoPan:!1,positioning:"center-center",offset:[0,-14],stopEvent:!1});var t=J("map");t?this.init(t):J("map/que").push(function(t){e.init(t)})}},{key:"init",value:function(e){var t=this;e.addOverlay(this.state.overlay),e.on("pointermove",function(n){if(!n.dragging){var o=e.getEventPixel(n.originalEvent),r=e.hasFeatureAtPixel(o);e.getTarget().style.cursor=r?"pointer":"",t.state.tooltipVisible=t.open(!!r&&n.originalEvent,e)}})}},{key:"open",value:function(e,t){if(!e)return this.el.html(""),this.state.overlay.setPosition(void 0),this.state.currentFeature=null,!1;var n=t.getEventCoordinate(e),o=t.forEachFeatureAtPixel(t.getEventPixel(e),function(e,t){return e});return o!==this.state.currentFeature&&(o.get("name")||o.get("title"))&&("Point"===o.getGeometry().getType()&&(n=o.getGeometry().getCoordinates()),this.el.html(te(o.get("name")||o.get("title"))),this.state.overlay.setPosition(n),this.state.currentFeature=o),!0}}])&&Ma(n.prototype,o),r&&Ma(n,r),t}();n(386);function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var za=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=Va(t).call(this,e),(n=!r||"object"!==Wa(r)&&"function"!=typeof r?Ha(o):r).el=ie()('<div id="popup-map"></div>'),n.state={overlay:null,infoStore:[],geomTypes:{linestrings:["LineString","MultiLineString"],polygons:["Polygon","MultiPolygon"]}},n.handlers={clicked:function(e){n.open(e)}},n.create(),Y("components/featureInfo",Ha(Ha(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=this;this.state.overlay=new Pr.a({element:this.el[0],autoPan:!0,positioning:"center-center",offset:[0,-16]});var t=J("map");t?(this.state.map=t,this.init(t)):J("map/que").push(function(t){e.state.map=t,e.init(t)})}},{key:"init",value:function(e){e.addOverlay(this.state.overlay),this.enable()}},{key:"enable",value:function(){this.state.map.on("singleclick",this.handlers.clicked)}},{key:"disable",value:function(){this.state.map.un("singleclick",this.handlers.clicked)}},{key:"open",value:function(e){var t,n=e.coordinate,o=this.state.map.forEachFeatureAtPixel(e.pixel,function(e,t){if(t)return[t,e]});(this.el.popover("dispose"),o)&&("Point"===o[1].getGeometry().getType()&&(n=o[1].getGeometry().getCoordinates()),t=o[0]&&this.state.infoStore[o[0].get("id")]?this.state.infoStore[o[0].get("id")](o[1]):this.getContent(o[1],o[0]),this.state.overlay.setPosition(n),this.el.popover(t.definition).popover("show"),this.el.on("shown.bs.popover",function(e){t.onShow(o,ie()(e.target).data("bs.popover").tip)}),this.el.on("hidden.bs.popover",function(e){t.onHide(e)}),this.el.popover("show"))}},{key:"getContent",value:function(e,t){var n=this;if(e&&t){var o,r,a=e.getProperties(),i=J("geocache/trip");if(t.get("_featureInfo")){var s=t.get("_featureInfo");o="function"==typeof s.title?s.title(e):s.title,r="function"==typeof s.content?s.content(e):s.content}else o='\n          <i class="fa fa-map-marker-alt"></i>\n          '.concat(te("Feature"),'\n          <a href="#" class="tools remove-marker float-right" title="Eemalda">\n            <i class="far fa-trash-alt"></i>\n          </a>\n          ').concat(e.getGeometry()instanceof Vt.a?'\n            <a href="#" class="tools cache-toggle float-right" data-id="'.concat(e.get("id"),'" title="').concat(te("Add to geotrip"),'">\n              <i class="fas ').concat(i&&i.getArray().indexOf(e)>-1?"fa-minus-square":"fa-thumbtack",'"></i>\n            </a>\n          '):""),r=Object.keys(a).filter(function(e){return"string"==typeof a[e]||"number"==typeof a[e]}).map(function(e){return"".concat(e,": ").concat(a[e])}),this.state.geomTypes.linestrings.indexOf(e.getGeometry().getType())>-1&&r.push("".concat(te("Length"),": ").concat(S(e.getGeometry()))),this.state.geomTypes.polygons.indexOf(e.getGeometry().getType())>-1&&r.push("".concat(te("Area"),": ").concat(j(e.getGeometry()))),r=r.join("<br>");return{definition:{container:this.el,placement:"top",animation:!1,html:!0,title:o,content:r,template:'\n            <div class="popup popover">\n              <div class="arrow"></div>\n              <h3 class="popover-header"></h3>\n              <div class="popover-body"></div>\n            </div>'},onShow:function(e,t){var o=J("geocache/trip");ie()(t).on("contextmenu",function(e){e.stopPropagation()}),ie()(t).on("click",".remove-marker",function(t){t.preventDefault(),e[0]&&(e[0].getSource().removeFeature(e[1]),o&&o.remove(e[1]),n.el.popover("dispose"))}),ie()(t).on("click",".cache-toggle",function(t){t.preventDefault(),ie()(t.currentTarget).find("i").toggleClass("fa-thumbtack fa-minus-square"),o&&(o.getArray().indexOf(e[1])>-1?o.remove(e[1]):o.push(e[1]))})},onHide:function(){}}}}}])&&Ba(n.prototype,o),r&&Ba(n,r),t}();n(387);function Ya(e){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Za(e,t){return!t||"object"!==Ya(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Za(this,Xa(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,Q),n=t,(o=[{key:"render",value:function(){var e=J("app/debug");e&&(["debug","error","info"].forEach(function(e){console[e+"_"]=console[e],console[e]=function(){for(var t=(new Date).toISOString(),n=0,o=arguments.length;n<o;n++){var r=arguments[n];t+=" "+f(r),"object"===f(r)&&"object"===("undefined"==typeof JSON?"undefined":f(JSON))&&"function"==typeof JSON.stringify?function(){var e=[];t+=" "+JSON.stringify(r,function(t,n){if("object"===f(n)&&null!==n){if(-1!==e.indexOf(n))try{return JSON.parse(JSON.stringify(n))}catch(e){return}e.push(n)}return n})}():t+=" "+r}d.push(t),console[e+"_"].apply(void 0,arguments)}}),console.debug("Debug mode enabled")),ee(J("app/locale"),Ee),e&&console.debug("Locale: "+J("app/locale")),this.components={map:new kt(this.target),contextmenu:new ba(this.target),header:new Jo(this.target),statusbar:new Wr(this.target),toolbar:new fa(this.target),streetview:J("app/streetView")&&new Aa(this.target),measure:J("app/measureTool")&&new Fa(this.target),tooltip:J("app/tooltip")&&new Ia(this.target),popup:J("app/featureInfo")&&new za(this.target)},this.components.map.init()}}])&&Ja(n.prototype,o),r&&Ja(n,r),t}();n.d(t,"reloadApp",function(){return ti});var $a=null,ei=ie()("#geop");function ti(){$a&&($a.destroy(),$a=null,ei.html("")),window.location.reload()}!function(){if("serviceWorker"in navigator==0)return console.log("Service worker is not supported"),!1;navigator.serviceWorker.register("sw.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}}).catch(function(e){console.error("Error during service worker registration:",e)})}(),"onhashchange"in window&&(P.newURL=k(document.URL),P.hash=L(k(document.URL).hash),window.addEventListener("hashchange",function(e){P.oldURL=P.newURL,P.newURL=k(e.newURL),P.hash=L(P.newURL.hash),_.forEach(function(e){e(P.hash)}),x=!1},!1)),je().then(function(e){new Qa(ei).render()})}});
//# sourceMappingURL=main.js.map